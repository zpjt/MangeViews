(window.webpackJsonp=window.webpackJsonp||[]).push([[9],[function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Search=e.RippleBtn=e.DropMenu=e.SInp=e.SComboTree=e.Tree=e.Calendar=e.SModal=e.SCombobox=e.Unit=void 0;var i,a=(i=n(9))&&i.__esModule?i:{default:i},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n(8),n(7),n(6),n(2);var s=n(5);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=function(){function t(){o(this,t),this.tipInit()}return r(t,[{key:"JsonTofind",value:function(t,e){var n=Object.assign({},{childField:"children",keyField:"id",data:[]},t),i=n.childField,a=n.keyField,r=null;return function t(n){return n.find(function(n){var s=n[i];return n[a]===e?(r=n,!0):s.length?t(s):void 0})}(n.data),r}},{key:"tipToast",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n='<div class="tip-item tip1">\n\t\t\t\t\t\t\t<p class="tip-close">\n\t\t\t\t\t\t\t\t<span><i class="sicon '+["sicon-error","sicon-detail","sicon-warn"][+e]+'"></i>&nbsp;'+["错误提示","成功提示","警告提示"][+e]+'</span>\n\t\t\t\t\t\t\t\t<span class="j-close"><i class="fa fa-times"></i></span>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p class="tip-txt"><span>'+t+'</span></p>\n\t\t\t\t\t\t\t<div class="tip-progress"></div>\n\t\t\t\t\t\t</div>';this.$tipBox.append(n);var i=$(".tip-item:last-child");setTimeout(function(){i.remove()},6e3)}},{key:"tipInit",value:function(){this.$tipBox=$("#tipToast"),this.$tipBox.on("click",".j-close",function(){$(this).closest(".tip-item").remove()})}},{key:"openLoading",value:function(){}}]),t}(),c=function(){function t(e,n){o(this,t),this.config=Object.assign({},{serachCallback:function(){},closeCallback:function(){},childrenField:"children",keyField:"id",judgeRelation:function(){return!1},is_Arr:!0},n),this.box=e,this.data=[],this.renderSearch(),this.handle()}return r(t,[{key:"seachTree",value:function(t){var e=this.config,n=e.childrenField,i=e.keyField,a=e.judgeRelation,r=this.data;return function e(r){return r.filter(function(r){var s=r[n],o=a(r);if(r[i],o){if(s.length){var l=e(s);return(r[n]=l).length}return!1}var c=r[i].includes(t);if(s.length){var h=e(s);return(r[n]=h).length||c}return c})}(JSON.parse(JSON.stringify(r)))}},{key:"serachArr",value:function(t){var e=this.config.keyField;return this.data.filter(function(n){return n[e].includes(t)})}},{key:"renderSearch",value:function(){this.box.html('\n\t\t\t\t\t<div class="input-box">\n\t\t\t\t\t\t<input type="text" class="s-inp search-inp" id="searchInp" placeholder="搜索关键字....">\n\t\t\t\t\t\t<button class="s-btn search-btn" id="searchBtn">\n\t\t\t\t\t\t\t<span class="search-icon"></span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<span class="search-close" id="searchClose">\n\t\t\t\t\t\t<i class="fa fa-times fa-2x"></i>\n\t\t\t\t\t</span> ')}},{key:"search",value:function(){return this.config.is_Arr?this.serachArr:this.seachTree}},{key:"handle",value:function(){var t=this,e=t.box,n=t.config,i=n.serachCallback,a=n.closeCallback,r=e.find(".search-inp"),s=this.search();e.on("click",".search-btn",function(){var n=e.hasClass("active-search");if(!n&&e.addClass("active-search"),n){var a=r.val().trim();if(a){var o=s.call(t,a);i(o)}}}),e.on("click",".search-close",function(){e.removeClass("active-search"),a(t.data)})}}]),t}(),h=function(){function t(e){o(this,t),this.config=Object.assign({},{opacity:.5,speed:.6,bgColor:"#fff"},e),this.els=$(".m-rippleBtn"),this.handle()}return r(t,[{key:"init",value:function(t){}},{key:"renderRipple",value:function(t,e){var n=this.getPosition(t[0],e);this.createRipple(t,n)}},{key:"getPosition",value:function(t,e){var n=t.getBoundingClientRect(),i=n.width,a=n.height,r=n.x,s=n.y,o=Math.max(i,a),l=e.clientX-r-o/2;return{radiusRange:o,top:e.clientY-s-o/2,left:l}}},{key:"createRipple",value:function(t,e){var n=e.radiusRange,i=e.top,a=e.left,r=this.config,s=r.opacity,o=r.speed,l='<span class="u-ripple" style="opacity:'+s+";background:"+r.bgColor+";animation-duration:"+o+"s;width:"+n+"px;height:"+n+"px;top:"+i+"px;left:"+a+'px"></span>';t.append(l)}},{key:"handle",value:function(){var t=this;this.els.on("click",function(e){var n=$(this);t.renderRipple(n,e)}),this.els.on("animationend",".u-ripple",function(t){$(this).remove()})}}]),t}(),d=function(){function t(e,n){o(this,t),this.config=Object.assign({},{data:[],buttonIcon:"fa fa-plus",dropIcon:"fa fa-chevron-down",buttonTxt:"新增",itemH:30,itemCallback:function(){},slideCallBack:function(){}},n),this.box=e,this.init(),this.handle()}return r(t,[{key:"init",value:function(){var t=this.renderButtons(),e='<ul class="menu-box">'+this.renderDrop().join("")+"</ul>";this.box.html(t+e)}},{key:"renderDrop",value:function(){var t=this.config,e=t.data,n=t.itemH;return e.map(function(t,e){var i=t.icon,a=t.text;return'<li class="menu-item" echo-data = \''+t.id+"' style=\"top:"+e*n+'px">\n  \t\t\t\t\t<span class="drop-icon">\n  \t\t\t\t\t\t<i class=\''+i+'\'></i>\n  \t\t\t\t\t</span>\n  \t\t\t\t\t<span class="drop-text">\n  \t\t\t\t\t\t'+a+"\n  \t\t\t\t\t</span>\n\t\t\t\t</li>"})}},{key:"renderButtons",value:function(){var t=this.config,e=t.dropIcon;return'<div class="menu-btn">\n\t\t\t\t\t<span>\n\t\t\t\t\t  <i class="'+t.buttonIcon+'"></i>\n\t\t\t\t\t\t'+t.buttonTxt+'\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class="s-Divider"></span>\n\t\t\t\t\t<span class="dropmenu-icon">\n\t\t\t\t\t\t<i class="'+e+'"></i>\n\t\t\t\t\t</span>\n\t\t\t\t</div>'}},{key:"reload",value:function(t){this.config.data=t;var e=this.renderDrop().join("");this.box.find(".menu-box").html(e)}},{key:"handle",value:function(){var t=this;this.box.on("click",".menu-btn",function(){var e=$(this),n=e.parent(".drop-menu"),i=e.siblings(".menu-box");n.hasClass("active")?(n.removeClass("active"),window.requestAnimationFrame(function(){i.hide()})):(i.show(),t.config.slideCallBack(),window.requestAnimationFrame(function(){n.addClass("active")}))}),this.box.on("click",".menu-item",function(){var e=$(this);t.config.itemCallback(e),t.box.removeClass("active"),t.box.children(".menu-box").hide()})}}]),t}(),u=function(){function t(){o(this,t),this.init()}return r(t,[{key:"init",value:function(){this.handle()}},{key:"handle",value:function(){$(".s-inp-box .s-inp.s-valid").on("blur",function(){!this.value.trim()&&$(this).addClass("no-fill")||$(this).removeClass("no-fill")}),$(".num-valid").on("blur",function(){this.validity.valid?$(this).removeClass("no-fill"):$(this).addClass("no-fill")})}}]),t}(),f=function(){function t(e,n){o(this,t),this.config=Object.assign({},{prompt:"请选择...",slideIcon:"fa fa-chevron-down",data:[],dropIcon:"fa fa-circle",textField:"text",idField:"id",validCombo:!0,dropFormatter:null,multiply:!1,defaultVal:"",clickCallback:function(){},width:260,textarea:!1},n),this.box=e,this.selValue=this.config.defaultVal,this.init(),this.handle()}return r(t,[{key:"init",value:function(){var t=this.config.width;this.box.css({width:t}),this.box.html(this.initRender()),this.selValue.length&&this.updateInpBox(this.box.find(".drop-ul"))}},{key:"loadData",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.box;this.config.data=t;var n=this.renderDrop().join(""),i=e.children(".combo-drop");i.html("<ul>"+n+"</ul>"),!this.updateInpBox(i.children()).length&&this.config.validCombo&&e.children(".combo-inp").addClass("no-fill")}},{key:"initRender",value:function(){return'\n\t\t\t\t<div class="combo-inp '+(this.config.validCombo?"no-fill":"")+'" >\n\t\t\t\t\t'+this.renderInpBox()+'\n\t\t\t\t</div>\n\t\t\t\t<div class="combo-drop ">\n\t\t\t\t\t<ul class="drop-ul">\n\t\t\t\t\t\t'+this.renderDrop().join("")+"\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t\t"}},{key:"setValue",value:function(t){var e=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.box).children(".combo-drop").children("ul");this.config.multiply?e.html(this.renderDrop(t)):e.children("li[echo-id="+t+"]").addClass("active").siblings().removeClass("active"),this.updateInpBox(e)}},{key:"getValue",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.box,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"id",n=t.find(".combo-value").val();if("id"==e)return n;var i=this.config,a=(i.data,i.idField);return i.textField,this.config.data.filter(function(t){return n.includes(t[a])})}},{key:"clearValue",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.box,e=t.find(".combo-value");this.selValue="",e.val(null),e.siblings(".combo-text").val(null),this.config.validCombo&&e.parent().addClass("no-fill"),t.find(".active").removeClass("active")}},{key:"updateInpBox",value:function(t){var e=t.parent().siblings(),n=e.children(".combo-text"),i=e.children(".combo-value"),a=this.config,r=a.data,s=a.idField,o=a.textField,l=(a.multiply,a.validCombo),c=[],h=$.map(t.children(".active"),function(t,e){var n=$(t).attr("echo-id"),i=c[e]=r.find(function(t){return t[s]==n});return c[e]=i&&i[o]||"",n});return this.selValue=h,n.val(c.join(",")),i.val(h.join(",")),l&&(h.join(",")?e.removeClass("no-fill"):e.addClass("no-fill")),this.selValue}},{key:"renderInpBox",value:function(){var t=this.config,e=t.textarea,n=t.multiply,i=t.prompt,a=t.slideIcon,r=this.selValue;return"\n\t\t\t\t\t"+((e||n)&&'<textarea  class="s-textarea combo-text" placeholder="'+i+'" readOnly="readOnly"></textarea>'||'<input type="text" class="s-inp combo-text" placeholder="'+i+'" readOnly="readOnly"/>')+'\n\t\t\t\t\t<input type="hidden" class="s-inp combo-value"  value="'+(Array.isArray(r)?r.join(","):r)+'"/>\n\t\t\t\t\t<span class="slide-icon '+a+'">\n\t\t\t\t\t</span>\n\t\t\t\t'}},{key:"renderDrop",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.selValue,e=this.config,n=e.data,i=e.dropIcon,a=e.textField,r=e.idField,s=e.dropFormatter;return n.map(function(e,n){var o=e[r];return'<li class="drop-item '+(t.includes(o)?"active":"")+'" echo-id="'+o+'">\n\t\t\t\t\t\t<span class="'+i+'"></span>\n\t\t\t\t\t\t<b class="item-txt">'+(s&&s(e)||e[a])+"</b>\n\t\t\t\t\t</li>"})}},{key:"handle",value:function(){var t=this;this.box.on("click",".drop-item",function(e){e.stopPropagation();var n=$(this),i=null,a=n.hasClass("active");if(t.config.multiply)a&&n.removeClass("active")||n.addClass("active"),i=!a;else{if(a)return;i=t.getValue(),n.addClass("active").siblings().removeClass("active")}var r=n.parent();t.updateInpBox(r),!t.config.multiply&&t.hideUp(t.box);var s=n.attr("echo-id"),o=t.config.data.find(function(e){return e[t.config.idField]==s});t.config.clickCallback(o,t,i)}),this.box.on("click",".combo-inp",function(e){e.stopPropagation();var n=$(this).parent();n.hasClass("active")?t.hideUp(n):t.showDown(n)})}},{key:"showDown",value:function(t,e){t.children(".combo-drop").show(),requestAnimationFrame(function(){t.addClass("active")})}},{key:"hideUp",value:function(t){t.removeClass("active"),t.children(".combo-drop").hide()}}]),t}(),p=function(){function t(){o(this,t),this.handle()}return r(t,[{key:"init",value:function(){}},{key:"close",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"m-show";t.removeClass(e),requestAnimationFrame(function(){t.hide()})}},{key:"show",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"m-show";t.show(),requestAnimationFrame(function(){t.addClass(e)})}},{key:"handle",value:function(){var t=this;$(".m-close").click(function(e){var n=$(this).closest(".s-modal");t.close(n)});var e=null,n=null,i=null;$(".m-title").mousedown(function(t){(t.target||t.srcElement).classList.contains("m-title")&&(e="move",n=$(this).closest(".s-modal"),i={x:t.offsetX,y:t.offsetY})}),$(window).on("mousemove",function(t){if(t||window.events,e){var a=t.clientX-i.x,r=t.clientY-i.y;n[0].style.transform="translate("+a+"px,"+r+"px)",n[0].style.top=0,n[0].style.left=0}}),$(".m-title").on("mouseup",function(){i=n=e=null})}}]),t}(),v=function(){function t(e,n){o(this,t);var i={data:[],textField:"text",search:!0,idField:"id",childIcon:"fa fa-user-circle-o",parIcon:"fa fa-folder-open-o",slideIcon:"fa fa-minus-square-o",checkbox:!1,formatter:null,parClick:!1,clickCallback:function(){},checkCallback:function(){},clickAndCheck:!0,childrenField:"children",judgeRelation:function(t){return 0<t[i.childrenField].length}};this.config=Object.assign({},i,n),this.box=e,this.selArr=null,this.searchStatus=null,this.init(),this.handle()}var e,n;return r(t,[{key:"init",value:function(){this.selArr=[],this.searchStatus=!1;var t=this.config,e=t.data,n=t.search,i=this.renderOrgJson(e,0),a=n?'<div class="tree-search">\n\t\t\t\t\t\t\t\t\t<label >\n\t\t\t\t\t\t\t\t\t\t\t<input type="text" class="s-inp" placeholder="搜索..." />\n\t\t\t\t\t\t\t\t\t\t\t<span class="search-close">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-times"></i> \n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t<button class="s-btn j-search"><i class="fa fa-search-plus"></i></button>\n\t\t\t\t\t\t\t\t\t</div>':"";this.box.html(a+'<ul class="s-tree">'+i.join("")+"</ul>")}},{key:"changeType",value:function(t){this.config.checkbox=t,this.box.unbind(),this.init(),this.handle()}},{key:"seachTree",value:function(t){var e=this.config,n=e.data,i=e.childrenField,a=e.textField,r=e.judgeRelation;return function e(n){return n.filter(function(n){var s=n[i],o=r(n);if(n[a],o){if(s.length){var l=e(s);return(n[i]=l).length}return!1}var c=n[a].includes(t);if(s.length){var h=e(s);return(n[i]=h).length||c}return c})}(JSON.parse(JSON.stringify(n)))}},{key:"renderOrgJson",value:function(t,e){var n=this,i=e;i++;var a=this.config,r=a.idField,s=a.textField,o=a.childrenField,l=a.judgeRelation,c=a.childIcon,h=a.parIcon,d=a.formatter;return t.map(function(t,e){var a=t[r],u=!d&&t[s]||d(t),f=t[o],p=t.par_id,v=l(t),m={id:a,name:u,lev:i,par_id:p};if(v){m.parIcon=h;var b=n.renderOrgJson(f,i);return n.parentComponent(b,m)}return m.childIcon=c,n.childComponent(m)})}},{key:"reload",value:(e=a.default.mark(function t(){var e,n,i,r,s=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=s?this.seachTree(s):this.config.data,n=this.renderOrgJson(e,0),this.box.find(".s-tree").html(n),i=this.config.idField,r=this.selArr.map(function(t){return t[i]}),this.setValue(r,!1);case 6:case"end":return t.stop()}},t,this)}),n=function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function i(a,r){try{var s=t[a](r),o=s.value}catch(a){return void n(a)}if(!s.done)return Promise.resolve(o).then(function(t){i("next",t)},function(t){i("throw",t)});e(o)}("next")})},function(){return n.apply(this,arguments)})},{key:"parentComponent",value:function(t,e){var n=e.name,i=e.id,a=e.lev,r=(e.par_id,this.config),s=r.parIcon,o=r.checkbox,l=r.slideIcon;return'\n\t\t\t<li  lev="'+a+'" class="tree-li">\n\t\t\t\t<div class="menuItem par-item" echo-id="'+i+'">\n\t\t\t\t\t'+(new Array(a).fill('<span class="indent"></span>').join("")+(o&&'<span class="s-checkbox">\n\t\t\t\t\t\t<input type="checkbox" class="par-checkinp tree-inp" value="'+i+'"  /><label class="fa fa-square-o" ></label>\n\t\t\t\t</span>'||""))+'\n\t\t\t\t\t<i class="'+s+'"></i>\n\t\t\t\t\t<span class="item-txt">'+n+'</span><span class="tree-slide-icon"><i class="'+l+'"></i></span>\n\t\t\t\t</div>\n\t\t\t\t<ul class="par-menu">'+t.join("")+"</ul>\n\t\t\t</li>\n\t\t"}},{key:"childComponent",value:function(t){var e=t.name,n=t.id,i=t.lev,a=this.config,r=a.childIcon,s=a.checkbox&&'<span class="s-checkbox">\n\t\t\t\t\t\t<input type="checkbox" class="child-checkinp tree-inp" value="'+n+'"  /><label class="fa fa-square-o" ></label>\n\t\t\t\t</span>'||"";return'\n\t\t\t<li lev="'+i+'" class="tree-li">\n\t\t\t\t<div class="menuItem child-item" echo-id="'+n+'">\n\t\t\t\t'+(new Array(i).fill('<span class="indent"></span>').join("")+s)+'\n\t\t\t\t<i class="'+r+'">&nbsp;</i>\n\t\t\t\t<span class="item-txt">'+e+"</span>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t"}},{key:"cascadeTreeInp",value:function(t,e,n){var i=t.closest(".tree-li"),a=i.attr("lev");for(e&&(i.find(".has-chec").removeClass("has-chec"),i.find(".tree-inp").prop("checked",n));1<a;){a=+(i=i.parent().parent()).attr("lev");var r=i.children(".menuItem").find(".tree-inp"),s=i.children(".par-menu"),o=s.children("li").length,l=s.children("li").children(".menuItem").find(".tree-inp:checked").length;0===l?(r.siblings("label").removeClass("has-chec"),r.prop("checked",!1)):l<o?(r.prop("checked",!1),r.siblings("label").addClass("has-chec")):(r.siblings("label").removeClass("has-chec"),r.prop("checked",!1),r.prop("checked",!0),r.siblings("label").removeClass("has-chec"));var c=i.find(".has-chec").length;0==l&&c&&(r.prop("checked",!1),r.siblings("label").addClass("has-chec"))}return this.findNode(t.val())}},{key:"upDataSelArr",value:function(t,e,n,i){var a=this,r=this.config.idField;if(n)if(this.searchStatus){var s=this.config.idField;$.map(e.parent().parent().siblings(".par-menu").find(".child-checkinp"),function(t){var e=t.value;return a.findNode(e)}).map(function(t){var e=a.selArr.findIndex(function(e){return e[s]==t[s]});i?-1==e&&a.selArr.push(t):-1<e&&a.selArr.splice(e,1)})}else{var o=$.map(this.box.find(".child-checkinp:checked"),function(t){var e=t.value;return a.findNode(e)});this.selArr=o}else if(i)this.selArr.push(t);else{var l=this.selArr.findIndex(function(e){return e[r]==t[r]});this.selArr.splice(l,1)}}},{key:"handle",value:function(){var t=this.config,e=t.clickCallback,n=t.clickAndCheck,i=t.checkbox,a=t.checkCallback,r=t.parClick,s=this;this.box.on("click",".tree-slide-icon",function(t){t.stopPropagation();var e=$(this).closest(".tree-li"),n=$(this).parent();n.hasClass("tree-active")&&n.removeClass("tree-active")||n.addClass("tree-active"),e.children(".par-menu").slideToggle()}),this.box.on("click",function(t){t.stopPropagation()}),this.box.on("click",".child-item",function(t){var a=$(this),r=s.findNode(+a.attr("echo-id"));i?n&&a.find(".tree-inp").click():(a.closest(".s-tree").find(".active").removeClass("active"),a.addClass("active"),s.selArr=[r]),e(r,a,s.selArr)}),this.box.on("click",".search-close",function(){var t=$(this);t.siblings(".s-inp").val(null),t.hide(),s.searchStatus=!1,s.reload()}),this.box.on("click",".j-search",function(){var t=$(this).siblings("label").children(".search-close");t.show();var e=t.siblings(".s-inp").val().trim();e&&(s.searchStatus=!0,s.reload(e))}),this.box.on("click",".par-item",function(){var t=$(this),a=s.findNode(+t.attr("echo-id"));i&&n&&t.find(".tree-inp").click(),i&&e(a,t),!i&&r&&(t.closest(".s-tree").find(".active").removeClass("active"),t.addClass("active"),s.selArr=[a],e(a,t,s.selArr))}),this.box.on("click",".tree-inp",function(t){t.stopPropagation();var e=$(this),n=e.prop("checked"),i=e.hasClass("par-checkinp"),r=s.cascadeTreeInp(e,i,n);s.upDataSelArr(r,e,i,n),a(r,e,s.selArr)})}},{key:"setValue",value:function(t){var e=this,n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=this.box;this.config.checkbox?(n&&(this.selArr=t.map(function(t){return e.findNode(t)})),i.find(".tree-inp").prop("checked",!1).removeClass("has-chec"),t.map(function(t){var n=i.find(".child-checkinp[value="+t+"]").prop("checked",!0);e.cascadeTreeInp(n,!1,!0)}),this.config.checkCallback(null,null,this.selArr)):this.setSingleValue(t)}},{key:"setSingleValue",value:function(t){(1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.box).find(".menuItem[echo-id="+t+"]").click()}},{key:"getValue",value:function(t){var e=this;if(1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.box,this.config.checkbox)return $.map(this.box.find(".child-checkinp:checked"),function(n){var i=n.value;return"id"===t&&i||e.findNode(i)});var n=this.box.find(".active").attr("echo-id");return["id"===t&&n||this.findNode(n)]}},{key:"findNode",value:function(t){var e=null,n=this.config,i=n.childrenField,a=n.idField;return function n(r){return r.find(function(r){var s=r[a]==t;return s&&(e=r),r[i].length&&!s&&n(r[i])||s})}(n.data),e}}]),t}(),m=function(){function t(e,n){o(this,t),this.config=Object.assign({},{prompt:"请选择...",slideIcon:"fa fa-chevron-down",defaultVal:"",validCombo:!0,width:300,textarea:!1},n),this.box=e,this.init()}return r(t,[{key:"init",value:function(){var t=this.config.width;this.box.css({width:t}),this.box.html(this.initRender()),this.renderDrop(),this.handle()}},{key:"initRender",value:function(){var t=!!this.config.treeConfig.checkbox;return'\n\t\t\t\t<div class="combo-inp '+(this.config.validCombo?"no-fill":"")+'">\n\t\t\t\t\t'+this.renderInpBox(t)+'\n\t\t\t\t</div>\n\t\t\t\t<div class="combo-drop ">\n\t\t\t\t\t<ul class="s-tree"></ul>\n\t\t\t\t</div>\n\t\t\t\t'}},{key:"setValue",value:function(t){1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.box,this.tree.setValue(t)}},{key:"getValue",value:function(){return this.tree.getValue("all")}},{key:"clearValue",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.box,e=t.find(".combo-value");e.val(null),e.siblings(".combo-text").val(null),this.config.validCombo&&e.parent().addClass("no-fill"),this.config.treeConfig.checkbox&&t.find(".tree-inp").prop("checked",!1).removeClass("has-chec")||t.find(".active").removeClass("active")}},{key:"updateInpBox",value:function(t){var e=this.tree.config,n=e.idField,i=e.textField,a=e.checkbox,r=this.box.find(".combo-inp"),s=r.children(".combo-text"),o=r.children(".combo-value"),l=[],c=[];a?l=this.tree.selArr.map(function(t){return c.push(t[n]),t[i]}):(l[0]=t[i],c[0]=t[n]),s.val(l.join(",")),o.val(c.join(",")),this.config.validCombo&&(0===c.length?r.addClass("no-fill"):r.removeClass("no-fill"))}},{key:"renderDrop",value:function(){var t=this,e=this.box.children(".combo-drop"),n=this.config.treeConfig,i=n.clickCallback,a=n.checkCallback,r=Object.assign({},this.config.treeConfig,{clickCallback:function(e,n){t.updateInpBox(e),!t.tree.config.checkbox&&t.hideUp(t.box),i&&i(e)},checkCallback:function(e,n){t.updateInpBox(),a&&a(e)}});this.tree=new v(e,r)}},{key:"changeType",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.box;this.tree.changeType(t,e),n.find(".combo-inp").html(this.renderInpBox(t)),this.config.validCombo&&n.children(".combo-inp").addClass("no-fill"),e&&this.setValue(e)}},{key:"renderInpBox",value:function(t){var e=this.config,n=e.prompt,i=e.slideIcon;return"\n\t\t\t\t\t"+((e.textarea||t)&&'<textarea type="text" class="s-textarea combo-text" placeholder="'+n+'" readOnly="readOnly"/></textarea>'||'<input type="text" class="s-inp combo-text" placeholder="'+n+'" readOnly="readOnly"/>')+'\n\t\t\t\t\t<input type="hidden" class="s-inp combo-value"  value=""/>\n\t\t\t\t\t<span class="slide-icon '+i+'">\n\t\t\t\t\t</span>\n\t\t\t\t'}},{key:"handle",value:function(){var t=this;this.box.on("click",".combo-inp",function(e){e.stopPropagation();var n=$(this).parent();n.hasClass("active")?t.hideUp(n):t.showDown(n)})}},{key:"showDown",value:function(t){t.children(".combo-drop").show(),requestAnimationFrame(function(){t.addClass("active")})}},{key:"hideUp",value:function(t){t.removeClass("active"),t.children(".combo-drop").hide()}}]),t}();e.Unit=l,e.SCombobox=f,e.SModal=p,e.Calendar=s.Calendar,e.Tree=v,e.SComboTree=m,e.SInp=u,e.DropMenu=d,e.RippleBtn=h,e.Search=c},function(t,e,n){"use strict";n(3);var i=window.jsp_config,a=i.baseUrl,r=i.resourse?a:"./";hookAjax({onreadystatechange:function(t){if(t.responseXML)return window.open(r+"login.html","_top"),!0},onload:function(t){if(t.responseXML)return window.open(r+"login.html","_top"),!0}})},function(t,e){},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){function e(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return t[i].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){n(1)(window)},function(t,e){t.exports=function(t){t.hookAjax=function(t){function e(e){return function(){var n=this.hasOwnProperty(e+"_")?this[e+"_"]:this.xhr[e],i=(t[e]||{}).getter;return i&&i(n,this)||n}}function n(e){return function(n){var i=this.xhr,a=this,r=t[e];if("function"==typeof r)i[e]=function(){t[e](a)||n.apply(i,arguments)};else{var s=(r||{}).setter;n=s&&s(n,a)||n;try{i[e]=n}catch(i){this[e+"_"]=n}}}}function a(e){return function(){var n=[].slice.call(arguments);if(!t[e]||!t[e].call(this,n,this.xhr))return this.xhr[e].apply(this.xhr,n)}}return window._ahrealxhr=window._ahrealxhr||XMLHttpRequest,XMLHttpRequest=function(){for(var t in this.xhr=new window._ahrealxhr,this.xhr){var r="";try{r=i(this.xhr[t])}catch(t){}"function"===r?this[t]=a(t):Object.defineProperty(this,t,{get:e(t),set:n(t)})}},window._ahrealxhr},t.unHookAjax=function(){window._ahrealxhr&&(XMLHttpRequest=window._ahrealxhr),window._ahrealxhr=void 0},t.default=t}}])},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Calendar=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n(4);var r=function(){function t(e,n){a(this,t);var i=n.selTime,r=n.CurTime,s=n.updateShowSel,o=n.time,l=n.timeWatch,c=n.rotate;this.updateShowSel=s,this.time=o,this.rotate=c,this.CurTime=r,this.showTime=Object.assign({},i),this.selTime=i,this.viewBox=e,this.index=this.viewBox.index(),this.searsonFormatter=["一季度","二季度","三季度","四季度"],this.monFormatter=["一","二","三","四","五","六","七","八","九","十","十一","十二"],this.timeWatch=l,this.init(),this.handle()}return i(t,[{key:"init",value:function(){var t='<div class="s-calendar-time">'+this.renderTimeShow()+"</div>"+this.renderView();this.viewBox.html(t),this.calendarItems=this.viewBox.find(".calendar-item"),this.timeBox=this.viewBox.find(".s-calendar-time")}},{key:"getMonDays",value:function(t,e){return new Date(t,e,0).getDate()}},{key:"dayToWeek",value:function(t,e,n){return new Date(t,e-1,n).getDay()}},{key:"renderView",value:function(){var t=this.renderDays().join(""),e=this.renderMon().join(""),n=this.renderSeason().join(""),i=this.renderYear(this.showTime.year).join(""),a=new Array(4).fill(""),r=this.time?"has-watchTime":"";return a[this.rotate-1]="calendar-active",'\n\t\t\t\t\t<ul class="s-calendar-content">\n\t\t\t\t\t\t<li class="calendar-item '+a[0]+'">\n\t\t\t\t\t\t\t'+i+'\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class="calendar-item '+a[1]+'">\n\t\t\t\t\t\t\t'+n+'\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class="calendar-item '+a[2]+'">\n\t\t\t\t\t\t\t'+e+'\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class="calendar-item '+a[3]+" "+r+'" >\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t'+t+"\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t   "}},{key:"renderTimeShow",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.rotate,e=this.showTime,n=e.year,i=e.mon,a=(e.searson,'\n\t\t\t\t\t\t\t<div class="calendar-control">\n\t\t\t\t\t\t\t\t<button class="s-btn day-btn" sign="'+t+'"><i class="fa fa-backward"></i></button>\n\t\t\t\t\t\t\t\t<button class="s-btn day-btn" sign="'+t+'"><i class="fa fa-forward"></i></button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t'),r="";switch(this.rotate){case 1:r="";break;case 2:case 3:r='<i class="fa fa-calendar">&nbsp;</i><span class="timeType" sign="1">'+n+"年</span>";break;case 4:r='<i class="fa fa-calendar">&nbsp;</i><span class="timeType" sign="1">'+n+'年</span><span>/</span><span class="timeType" sign="3">'+i+"月</span>"}return' <div class="time-box">\n\t\t\t\t\t\t\t\t\t'+r+"\n\t\t\t\t\t</div>\n\t\t\t\t\t"+((4===t||1===t)&&a||"")+" "}},{key:"renderDays",value:function(){var t=this,e=this.showTime,n=e.year,i=e.mon,a=this.getMonDays(n,i),r=this.dayToWeek(n,i,1),s=Math.ceil((a+r)/7),o="",l=new Array(s).fill("1").map(function(e,l){switch(l){case 0:var c=t.getMonDays(n,i-1),h=new Array(r).fill("1").map(function(e,n){var i=c-r+n+1;return t.dayComponent(i,"disabled")}),d=new Array(7-r).fill("1").map(function(e,n){var i=n+1;return t.dayComponent(i)});return'<ul class="data-group">'+h.concat(d).join("")+"</ul>";case s-1:o=7*l+1-r;var u=(a+r)%7||7,f=new Array(u).fill("1").map(function(e,n){var i=n+o;return t.dayComponent(i)}),p=new Array(7-u).fill("1").map(function(e,n){var i=n+1;return t.dayComponent(i,"disabled")});return'<ul class="data-group">'+f.concat(p).join("")+"</ul>";default:return o=7*l+1-r,'<ul class="data-group">'+new Array(7).fill("1").map(function(e,n){var i=n+o;return t.dayComponent(i)}).join("")+"</ul>"}});return this.time&&l.push(this.renderTimeBox()),['<ul class="week-group">\n\t\t\t\t\t\t\t<li>日</li><li>一</li><li>二</li><li>三</li><li>四</li><li>五</li><li>六</li>\n\t\t\t\t\t\t </ul>'].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(l))}},{key:"renderMon",value:function(){var t=this,e=this.showTime,n=e.year,i=(e.mon,this.CurTime.year===n),a=this.selTime.year===n;return new Array(4).fill("1").map(function(e,n){return'\t\n\t\t\t\t\t\t\t<ul class="mon-group">\n\t\t\t\t\t\t\t\t'+new Array(3).fill("1").map(function(e,r){var s=3*n+r+1;return'\n\t\t\t\t\t\t\t<li echo-text="'+s+'" class=" view-item '+(i&&t.CurTime.mon===s?"calendar-today":"")+" "+(a&&t.selTime.mon===s?"calendar-sel":"")+'" >\n\t\t\t\t\t\t\t\t<span class="mon-span">'+t.monFormatter[s-1]+"月</span>\n\t\t\t\t\t\t\t</li>\n\n\t\t\t\t\t\t\t"}).join("")+"\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t"})}},{key:"renderSeason",value:function(){var t=this,e=this.showTime,n=e.year,i=(e.searson,this.CurTime.year===n),a=this.selTime.year===n;return new Array(2).fill("1").map(function(e,n){var r=2*n+1,s=i&&r===t.CurTime.searson?"calendar-today":"",o=a&&t.selTime.searson===r?"calendar-sel":"",l=i&&r+1===t.CurTime.searson?"calendar-today":"",c=a&&t.selTime.searson===r+1?"calendar-sel":"";return'\n\t\t\t\t\t<ul class="searson-group">\n\t\t\t\t\t\t<li echo-text="'+r+'" class=" view-item '+s+" "+o+'">\n\t\t\t\t\t\t\t<span class="sea-span">'+t.searsonFormatter[r-1]+'</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li echo-text="'+(r+1)+'" class=" view-item '+l+" "+c+'" >\n\t\t\t\t\t\t\t<span class="sea-span">'+t.searsonFormatter[r]+"</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t"})}},{key:"renderYear",value:function(t){var e=this,n=t%10,i=t-(n=0===n?10:n)+1;this.lastYear=i+9;var a=new Array(9).fill("1").map(function(t,n){var a=i+n;return'\n\t\t\t\t\t<li echo-text="'+a+'" class=" view-item  '+(e.CurTime.year===a?"calendar-today":"")+" "+(e.selTime.year===a?"calendar-sel":"")+'">\n\t\t\t\t\t\t<span class="year-span">'+a+"</span>\n\t\t\t\t\t</li>\n\n\t\t\t\t\t"}),r=this.CurTime.year===this.lastYear?"calendar-today":"",s=this.selTime.year===this.lastYear?"calendar-sel":"",o='\n\t\t\t\t\t\t<div echo-text="'+this.lastYear+'" class="last-year view-item  '+r+" "+s+'">\n\t\t\t\t\t\t\t<span class="year-span">'+this.lastYear+"</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t ",l=new Array(3).fill("1").map(function(t,e){return'\n\t\t\t\t\t\t<ul class="year-group">\n\t\t\t\t\t\t\t'+a.splice(0,3).join("")+"\n\t\t\t\t\t\t</ul>\n\n\t\t\t\t\t"});return l.push(o),l}},{key:"dayComponent",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"abled",n=this.showTime,i=n.year,a=n.mon,r=this.selTime,s=r.year,o=r.mon,l=(r.searson,r.day);return'\n\t\t\t\t\t\t<li class="'+("abled"===e?" view-item ":"day-disabled")+" "+("abled"===e&&i===this.CurTime.year&&a===this.CurTime.mon&&this.CurTime.day===t?"calendar-today":"")+" "+("abled"===e&&i===s&&a===o&&t===l?"calendar-sel":"")+'"  echo-text="'+t+'">\n\t\t\t\t\t\t\t<span class="day-span">'+t+"</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t"}},{key:"updateDays",value:function(t){var e=this.showTime,n=e.year,i=e.mon,a=void 0,r=void 0;switch(t){case 0:a=i-1==0?12:i-1,r=i-1==0?n-1:n;break;case 1:a=i+1==13?1:i+1,r=i+1==13?n+1:n}this.showTime.mon=a,this.showTime.searson=Math.ceil(a/3),this.showTime.year=r;var s=this.renderDays().join("");this.timeBox.html(this.renderTimeShow()),this.calendarItems.eq(3).html(s)}},{key:"updateYears",value:function(t){var e=0===t?this.lastYear-10:this.lastYear+1,n=this.renderYear(e).join("");this.calendarItems.eq(0).html(n)}},{key:"updateCalendar",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.rotate;this.timeBox.html(this.renderTimeShow(t));var e=this.showTime.year,n=t-1,i="";switch(t){case 1:i=this.renderYear(e).join("");break;case 2:i=this.renderSeason().join("");break;case 3:i=this.renderMon().join("");break;case 4:i=this.renderDays().join("")}this.calendarItems.eq(n).html(i),this.calendarItems.eq(n).addClass("calendar-active").siblings().removeClass("calendar-active")}},{key:"updateSel",value:function(t){t.closest(".calendar-item").find(".calendar-sel").removeClass("calendar-sel"),t.addClass("calendar-sel")}},{key:"renderTimeBox",value:function(){var t=this.timeWatch;return'<div class="m-time">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<b>时间：&nbsp;</b>\n\t\t\t\t\t\t<input type="number" class="wacth-time" max="24" min="0" value="'+t[0]+'" echo-index="0" />\t\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<b>&nbsp;&nbsp;:&nbsp;</b>\n\t\t\t\t\t\t<input type="number" class="wacth-time" max="60" echo-index="1" min="0" value="'+t[1]+'" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>'}},{key:"handle",value:function(){var t=this;this.viewBox.on("click",".day-btn",function(){var e=$(this).index();4==+$(this).attr("sign")?t.updateDays(e):t.updateYears(e)}),this.viewBox.on("blur",".wacth-time",function(){var e=$(this),n=+e.attr("echo-index");t.timeWatch[n]=e.val().padStart(2,"0"),t.updateShowSel()}),this.viewBox.on("click",".view-item",function(){var e=+$(this).attr("echo-text"),n=t.rotate,i=Array.from(t.calendarItems).findIndex(function(t){return t.classList.value.includes("calendar-active")});t.showTime[["year","searson","mon","day"][i]]=e;var a=t.showTime,r=a.year,s=a.searson,o=a.mon,l=a.day;t.selTime.year=r,t.selTime.searson=s,t.selTime.mon=o,t.selTime.day=l,t.updateShowSel(),n===i+1&&t.updateSel($(this))||t.updateCalendar()}),this.viewBox.on("click",".timeType",function(){var e=+$(this).attr("sign");t.updateCalendar(e)})}}]),t}(),s=function(){function t(e,n,i){a(this,t);var r=Object.assign({},{rotate:3,style:1,time:!1,hasInp:!0,callback:function(){}},i),s=r.rotate,o=r.style,l=r.time,c=r.hasInp,h=r.callback;this.rotate=s,this.style=o,this.time=l,this.hasInp=c,this.CurTime=this.getCurTime(),this.selTime=this.initSelTime(),this.typeChange=[{rotate:"年"},{rotate:"季"},{rotate:"月"},{rotate:"日"}],this.timeWatchArr=[[10,30],[12,50]],this.container=e,this.inp=n,this.callback=h,this.value="",this.init(),this.Handle()}return i(t,[{key:"changeStyle",value:function(t,e){this.style=t,this.selTime=this.initSelTime(),this.showSelBox.html(this.renderTimeStr().join("")),this.initViewsContent(),e&&this.setTime(e)}},{key:"init",value:function(){var t=this.initHead()+' <div class="calendar-container"> </div> ';this.container.html(t),this.calendarViewBox=this.container.children(".calendar-container"),this.showSelBox=this.container.find(".showSel-box"),this.frequemcy=this.container.find(".calendar-frequemcy"),this.rotateShow=this.container.find(".calendar-rotate"),this.initViewsContent()}},{key:"getCurTime",value:function(){var t=new Date,e=t.getFullYear(),n=t.getMonth()+1;return{year:e,mon:n,day:t.getDate(),searson:Math.ceil(n/3)}}},{key:"initHead",value:function(){var t=this,e=this.CurTime,n=(e.year,e.mon,e.searson,e.day,this.typeChange),i=n.map(function(e,n){var i=e.rotate;return'\n\t\t\t\t\t\t<li class="frequemcy-item '+(n===t.rotate-1?"frequemcy-active":"")+'">\n\t\t\t\t\t\t\t<span class="fa fa-calendar-plus-o">&nbsp;'+i+"</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t"});return'\n\t\t\t\t<div class="s-calendar-title">\n\t\t\t\t\t<div class="frequemcy-box">\n\t\t\t\t\t\t<button class="frequemcy-sel s-btn">\n\t\t\t\t\t\t\t<span class="fa fa-calendar-check-o"></span>\n\t\t\t\t\t\t\t<b class="calendar-rotate">'+n[this.rotate-1].rotate+'</b>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<ul class="calendar-frequemcy">\n\t\t\t\t\t\t\t'+i.join("")+' \n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="showSel-box">\n\t\t\t\t\t\t'+this.renderTimeStr().join("")+"\n\t\t\t\t\t</div>\n\t\t\t\t\t"+(this.hasInp?'<div> <button class="s-btn calendar-opt">确定</button> <button class="s-btn calendar-opt">取消</button> </div>':"")+"\n\t\t\t\t\t\n\t\t\t\t</div>\n\n\t\t\t\t"}},{key:"initViewsContent",value:function(){var t=this,e=new Array(this.style).fill("").map(function(t){return'<div class="calendar-view"></div>'});this.calendarViewBox.html(e.join(""));var n=Array.from(this.calendarViewBox.children(".calendar-view")),i=(this.CurTime,this.CurTime),a=this.time,s=(this.timeWatchArr,{CurTime:i,rotate:this.rotate,time:a,updateShowSel:function(){t.updateShowSel()}});this.view_2&&(this.view_2.viewBox.unbind(),this.view_2=null),i.year,i.mon,i.searson,i.day,n.map(function(e,n){s.selTime=t.selTime[n],s.timeWatch=t.timeWatchArr[n],t["view_"+n]=new r($(e),s)}),this.upInp()}},{key:"renderTimeStr",value:function(){var t=this,e=" - ",n=[],i=new Array(this.style).fill("").map(function(i,a){var r=t.selTime[a],s=r.year,o=r.searson,l=r.mon,c=r.day,h=t.timeWatchArr[a];l=(l+"").padStart(2,"0"),c=(c+"").padStart(2,"0");var d="";switch(t.rotate){case 1:d="",n[a]=[s];break;case 2:d=""+(e+o),n[a]=[s,"S"+o];break;case 3:d=""+(e+l),n[a]=[s,l];break;case 4:d=""+(e+l)+(e+c),n[a]=[s,l,c]}return"\n\t\t\t\t\t\t"+(1===a?"<span >&nbsp;-&nbsp;&nbsp;</span>":"")+'<span class="sel-time-inp">'+(s+d+(t.time&&4===t.rotate&&"&nbsp;&nbsp;"+h.join(" : ")||""))+"</span>\n\n\t\t\t\t\t\t"});return this.value=n,i}},{key:"initSelTime",value:function(){var t=this.CurTime,e=t.year,n=t.mon,i=t.searson,a=t.day,r=this.rotate;return new Array(this.style).fill("").map(function(t,s){switch(r){case 4:return{year:e,searson:i,mon:n+s,day:a+s};case 2:return{year:e,searson:i+s,mon:n,day:a};case 3:return{year:e,searson:i,mon:n+s,day:a};case 1:return{year:e+s,searson:i,mon:n,day:a}}})}},{key:"updateShowSel",value:function(t){var e=this,n=new Array(this.style).fill("").map(function(t,n){return e["view_"+n].selTime});this.selTime=n,this.showSelBox.html(this.renderTimeStr().join(""))}},{key:"updateRotate",value:function(){var t=this.rotate-1;this.rotateShow.html(this.typeChange[t].rotate),this.frequemcy.children().eq(t).addClass("frequemcy-active").siblings().removeClass("frequemcy-active")}},{key:"upInp",value:function(){var t=this;if(this.hasInp){var e=this.value.map(function(e,n){var i=t.time&&4===t.rotate&&"  "+t.timeWatchArr[n].join(" : ")||"";return e.join(" - ")+i});this.inp.val(e.join(" 至 "))}}},{key:"setTime",value:function(t){var e=this;if(Array.isArray(t)){var n=t[0]+"";4===n.length?(this.rotate=1,new Array(this.style).fill("").map(function(n,i){e.selTime[i].year=+t[i].substr(0,4);var a=e["view_"+i];a.rotate=e.rotate,a.showTime=Object.assign({},e.selTime[i]),a.updateCalendar()})):n.includes("S")?(this.rotate=2,new Array(this.style).fill("").map(function(n,i){e.selTime[i].year=+t[i].substr(0,4),e.selTime[i].searson=+t[i].substr(5,1);var a=e["view_"+i];a.rotate=e.rotate,a.showTime=Object.assign({},e.selTime[i]),a.updateCalendar()})):6===n.length?(this.rotate=3,new Array(this.style).fill("").map(function(n,i){e.selTime[i].year=+t[i].substr(0,4),e.selTime[i].mon=parseInt(t[i].substr(4,2));var a=e["view_"+i];a.rotate=e.rotate,a.showTime=Object.assign({},e.selTime[i]),a.updateCalendar()})):(this.rotate=4,new Array(this.style).fill("").map(function(n,i){e.selTime[i].year=+t[i].substr(0,4),e.selTime[i].mon=parseInt(t[i].substr(4,2)),e.selTime[i].day=parseInt(t[i].substr(6,2));var a=e["view_"+i];a.rotate=e.rotate,a.showTime=Object.assign({},e.selTime[i]),e.time&&(e.timeWatchArr[i]=t[i].split("@")[1].split(":"),a.timeWatch=e.timeWatchArr[i]),a.updateCalendar()})),this.updateShowSel(),this.upInp(),this.updateRotate()}}},{key:"Handle",value:function(){var t=this,e=this.hasInp;this.container.on("click",".frequemcy-item",function(){var e=$(this).index();t.frequemcy.slideToggle("fast",function(){t.rotate=e+1,t.updateRotate(),t.updateShowSel(),new Array(t.style).fill("").map(function(e,n){var i=t["view_"+n];i.rotate=t.rotate,i.updateCalendar()})})}),this.container.on("click",function(t){t.stopPropagation()}),e&&this.inp.click(function(e){e.stopPropagation(),t.container.is(":visible")?t.container.hide():t.container.show()}),this.container.on("click",".frequemcy-sel",function(){t.frequemcy.slideToggle()}),this.container.on("click",".calendar-opt",function(){if(0===$(this).index()){if(2===t.style){var e=t.value[0].join("/");e=2===t.rotate&&e.replace("S","")||e,e=new Date(e).getTime();var n=t.value[1].join("/");if(n=2===t.rotate&&n.replace("S","")||n,(n=new Date(n).getTime())<e)return void alert("结束时间要大于开始时间！")}t.callback(),t.upInp()}t.container.hide()})}}]),t}();e.Calendar=s},function(t,e){},function(t,e){},function(t,e){},,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimeView=e.STable=e.Border=e.View=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(22),r=n(21),s=n(20),o=n(18),l=n(16),c=function(){function t(e,n,i){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"1";!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var r=n.id,s=n.type,o=n.index,l=n.viewTitle,c=n.size,h=n.borderType;this.container=e,this.viewType=s,this.borderType=h,this.viewTitle=l,this.id=r,this.index=o,this.status=a,this.size=c,this.init(i)}return i(t,[{key:"init",value:function(t){var e=this.container.children(".view-content");"0"!==this.borderType&&this.initBorder(this.container.children(".bgSvg")),e.html(this.renderContent());var n=e.children(".view_main");this[{table:"initTable",chart:"initChart",timeReal:"initRealTime",editView:"initEditView"}[this.viewType]](n,t)}},{key:"initChart",value:function(t,e){var n=this.borderType,i=this.size;this.chart=new r.Chart(t[0],{border:n,size:i},e)}},{key:"initTable",value:function(t,e){var n=this.borderType,i=this.size;this.table=new s.STable(t,{border:n,size:i},e)}},{key:"initRealTime",value:function(t,e){var n=this.borderType,i=this.size;this.timeReal=new o.TimeView(t,{border:n,size:i},e)}},{key:"initEditView",value:function(t,e){var n=this.borderType;this.editView=new l.EditView(t,{border:n},e)}},{key:"initBorder",value:function(t){var e=this.viewTitle,n=this.id,i=this.borderType,r=this.size;this.border=new a.Border(t,{id:n,title:e,size:r,borderType:i})}},{key:"renderViewOpt1",value:function(){var t="2"===this.borderType?"border3-opt":"",e=["table","chart"].includes(this.viewType)?'<span class="fa fa-file-excel-o view-btn" sign="excel" title="导出excel"></span><span class="fa fa-filter view-btn" sign="filter" title="筛选"></span><span class="fa fa-refresh view-btn" sign="refresh" title="刷新"></span>':"";return this.viewType,'<div class="view-optBox '+t+'" >\n\t        \t\t<div class="btn-handle">\n\t\t\t\t\t\t<span class="fa fa-bars" ></span>\n\t\t\t\t\t</div>\n\t        \t\t<div class="view-btns" echo-id="'+this.id+'" echo-index="'+this.index+'">\n\t\t\t\t\t\t<span class="fa fa-expand view-btn" sign="expand" title="最大化"></span>\n\t\t\t\t\t\t<span class="fa fa-file-image-o view-btn" sign="image" title="导出图片"></span>\n\t\t\t\t\t\t'+e+"\n\t\t\t\t\t</div>\n\t        \t</div>"}},{key:"renderViewOpt2",value:function(){var t="2"===this.borderType?"border3-opt":"";return["table","chart"].includes(this.viewType),'<div class="view-optBox '+t+'" >\n\t        \t\t<div class="btn-handle">\n\t\t\t\t\t\t<span class="fa fa-bars" ></span>\n\t\t\t\t\t</div>\n\t        \t\t<div class="view-btns" echo-id="'+this.id+'" echo-index="'+this.index+'">\n\t\t\t\t\t\t<span class="fa fa-trash view-btn" sign="remove" title="删除"></span>\n\t\t\t\t\t\t<span class="fa fa-edit view-btn" sign="set" title="设置"></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t        \t</div>'}},{key:"renderContent",value:function(){return(1==this.status&&this.renderViewOpt1()||this.renderViewOpt2())+'<div class="view_main  '+this.viewType+'_main"></div>'}}]),t}();e.View=c,e.Border=a.Border,e.STable=s.STable,e.TimeView=o.TimeView},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n(1);var a=window.jsp_config.baseUrl,r=a+"layout/",s=a+"chart/",o=a+"Expo/",l=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,[{key:"showLayoutModel",value:function(t){return Promise.resolve($.post(r+"showLayoutModel",{layout_id:t}))}},{key:"getGraphData",value:function(t){return Promise.resolve($.post(s+"getGraphData",{chart_id:t}))}},{key:"getExeclld",value:function(t){return Promise.resolve($.ajax({url:o+"getExeclId",type:"post",contentType:"application/json",data:JSON.stringify(t)}))}},{key:"getTableData",value:function(t){return Promise.resolve($.post(s+"getTableData",{chartId:t}))}},{key:"getTableInfo",value:function(t){return Promise.resolve($.ajax({url:s+"getTableInfo",data:JSON.stringify(t),contentType:"application/json",type:"post"}))}},{key:"getGraphInfo",value:function(t){return Promise.resolve($.ajax({url:s+"getGraphInfo",data:JSON.stringify(t),contentType:"application/json",type:"post"}))}},{key:"getAssembly",value:function(t){return Promise.resolve($.get(r+"getAssembly",{assembly_id:t}))}}]),t}());e.api=l},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(e,n,i){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.borderType=n.borderType,this.box=e,this.init(i)}return i(t,[{key:"init",value:function(t){this.box.html(t)}}]),t}();e.EditView=a},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimeView=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}n(17);var r=function(){function t(e,n,i){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var a=n.border,r=n.size;this.border=a,this.size=r,this.numCount=6,this.box=e,this.oldArr=Array.from({length:i.data.length-1},function(t){return"000000"}),this.init(i)}return i(t,[{key:"init",value:function(t){var e=this,n=(t.tabInfo,t.tabInfo.tab_style),i=[],a=t.data.slice(1).map(function(t,a){return e.getItem(n,t,a,i)});this.box.html(a.join("")),this.oldArr=i}},{key:"getRandom",value:function(){return Math.floor(791*Math.random()+10)}},{key:"closeReload",value:function(){clearInterval(this.timer),this.timer=null}},{key:"getItem",value:function(t,e,n,i){var r=this,s=e[0],o=e.slice(1).reduce(function(t,e){return t+r.getRandom()},0),l=this.numCount,c=(o+"").padStart(l,"0");i.push(c);var h=[].concat(a(c)),d=this.oldArr[n],u=[].concat(a(d));return'<div class="timeItem timeStyle'+t+'" style="width:'+(1/(t*this.size[0])*100-2)+'%">\n\t\t\t\t\t\t\t<p class="real-zb">'+s+'</p>\n\t\t\t\t\t\t\t<ul class="reak-dataBox">\n\t\t\t\t\t\t\t\t'+this.renderData(h,u).join("")+"\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t </div>"}},{key:"renderData",value:function(t,e,n){var i=t.length;return t.map(function(t,n){var a=+e[n],r=a<t,s=r?t:a;return'<li class="item-data " >\n\t\t\t\t\t\t<div class="'+(t==a?"":r?"real-down":"real-up")+'" style="animation-duration:'+.5*(i-n)+'s"><p>'+s+"</p><p>"+(a+ +t-s)+"</p></div>\n\t\t\t\t\t</li>"})}}]),t}();e.TimeView=r},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.STable=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n(19);var a=function(){function t(e,n,i){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var a=n.border,r=n.size,s=JSON.parse(JSON.stringify(i));this.border=a,this.size=r,this.container=e,this.init(s)}return i(t,[{key:"init",value:function(t){var e=t.tabInfo,n=e.chartName,i=e.row_wd,a=e.col_wd,r=e.total,s=e.tab_style,o=t.data;this.title=n,this.config={row_wd:i,col_wd:a,total:r,tab_style:s};var l=this.renderTableHead(o),c=this.renderTableBody(o),h=this.container.height(),d=this.border,u="0"===d?0:30,f="0"===d?10:0,p='\n\t\t\t\t\t\t<div  class="s-tableBox fix-tab '+("0"!==s?"border-box":"")+'" style="margin-top: '+u+'px;">\n\t\t\t\t\t\t\t\t'+("0"===d?'<p class="s-table-title">'+(n||"")+"</p>":"")+'\n\t\t\t\t\t\t\t\t<div class="tab-head">\n\t\t\t\t\t\t\t\t\t<table class="tab-list ">\n\t\t\t\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t\t\t    '+l.join("")+'   \n\t\t\t\t\t\t\t\t\t    </thead>\n\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div class="table-body-wrap ">\n\t\t\t\t\t\t\t\t\t   <table  border="'+s+'" class="tab-list table-body" frame="void">\n\t\t\t\t\t\t\t\t\t\t\t'+c.join("")+"\n\n\t\t\t\t\t\t\t\t\t   </table>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t";this.container.html(p),console.log("33");var v=this.container.find(".table-body-wrap"),m=Math.floor(h-this.container.find(".tab-head").height()-26-u-f);m-v.children("table").height()<0&&(v.css("height",m),this.container.find(".gutter").show())}},{key:"getRandom",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:500;return Math.floor(Math.random()*(t-100+1)+100)}},{key:"renderTableHead",value:function(t){var e=this,n=this.config,i=n.row_wd,a=n.col_wd,r=n.total,s=["","时间","科室","指标","维度值"],o=i.length;return t.slice(0,o).map(function(t,n){var l=e.colspanCount(t,r),c=l.headData,h=l.colspanCount,d=c.reduce(function(t,e,i){var a="";return n<o-1&&(i+1)%h==0?a='<th colspan="'+h+'">'+e+"</th>":n==o-1&&(a="<th>"+e+"</th>"),t.push(a),t},[]);if(0===n){var u=a.map(function(t){return s[+t]});d.unshift('<th rowspan="'+i.length+'" width="'+(120*a.length+a.length-1)+'">'+u.join(" / ")+"</th>"),["1","3"].includes(r)&&(d[d.length]='<th rowspan="'+o+'">合计</th>'),d.push('<th class="gutter" rowspan="'+o+'"></th>')}return"<tr>"+d.join("")+"</tr>"})}},{key:"renderRow",value:function(t,e,n){var i=this;return t.reduce(function(t,a,r){if(r<n.length){var s=n[r];(e+1)%s!=1&&1!==s||t.push('<td rowspan="'+s+'" width="120">'+a+"</td>")}else{var o=i.getRandom();t.push("<td>"+o+"</td>")}return t},[])}},{key:"renderTableBody",value:function(t){var e=this,n=this.config,i=n.row_wd,a=n.col_wd,r=n.total,s=n.tab_style,o=t.slice(i.length),l=this.rowspanCount(o),c=["2","3"].includes(r)&&o.pop().splice(a.length)||null,h=0,d=o.map(function(t,n){return n%l[0]==0&&h++,'<tr class="'+("0"===s?h%2==0?"tr-bg1":"tr-bg2":"")+'">'+e.renderRow(t,n,l).join("")+"</tr>"});if(c){var u=c&&c.map(function(t){return"<td>"+t+"</td>"});d.push('<tr class="'+("0"===s?"foot-bg":"")+'"><td colspan="'+a.length+'">合计</td>'+u.join("")+"</tr>")}return d}},{key:"rowspanCount",value:function(t){return this.config.col_wd.map(function(e,n){var i=t[0][n],a=t.findIndex(function(t,e){return t[n]!=i});return-1===a?1:a})}},{key:"colspanCount",value:function(t,e){var n=this.config,i=(n.row_wd,n.col_wd);t.splice(0,i.length),["1","3"].includes(e)&&t.pop();var a=t.findIndex(function(e){return e!==t[0]});return{headData:t,colspanCount:a}}}]),t}();e.STable=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Chart=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n(14);var a=function(){function t(e,n,i){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var a=n.border,r=n.size;this.border=a,this.size=r,this.type="",this.Box=e,this.init(i)}return i(t,[{key:"init",value:function(t){var e=this.border,n=t.graphInfo,i=n.chartType,a=n.chartName,r=n.contrastDim,s=n.rowDim,o=t.data;this.type=i;var l=this[{3:"tabConfig",4:"lineConfig",5:"pieConfig",6:"radarConfig",7:"scatterConfig"}[this.type]](o);l.Dim={contrastDim:r,rowDim:s},"0"===e&&(l.title={text:a,left:"center",textStyle:{color:"white",fontSize:14}},l.backgroundColor="#4490c175");var c=echarts.init(this.Box);c.setOption(l),$(window).on("resize",function(){c.resize()})}},{key:"pieConfig",value:function(t){var e=this;console.log(t);var n=t[0],i=n.rowData,a=n.legend,r=n.roseType,s=i.map(function(n,i){return{name:t[0].rowDimName[i],value:e.getRandom(),selected:r%2!=0}}),o=["#c487ee","#deb140","#49dff0","#034079","#6f81da","#00ffb4"],l=["#1296FB","#0088CC","#00c4a5","#ea2e41","#05ffff","#ff6584"],c=["#05acff","#ee36ff","#05fcfb","#ffa597"],h=["#09c1ff","#8171ff","#05ffff","#ff6584"],d=s.map(function(t,e){var n={normal:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:o[e]},{offset:1,color:l[e]}],globalCoord:!0}}};return Object.assign({},t,{itemStyle:n})}),u=(s.map(function(t,e){var n={normal:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:c[e]},{offset:1,color:h[e]}],globalCoord:!1}}};return Object.assign({},t,n)}),this.getLegendPosition(a)),f=Object.assign(u.legend,{textStyle:{color:"#f2f2f2",fontSize:12},icon:"circle",data:s});return{tooltip:{show:!0,trigger:"item"},roseType:r%2==0,legend:f,series:[{radius:r<3&&["10%","60%"]||["30%","60%"],center:u.center,type:"pie",label:{show:!0,position:"outside",color:"#ddd",formatter:function(t){for(var e,n=0,i=0;i<s.length;i++)n+=s[i].value;return e=(t.value/n*100).toFixed(0),""!==t.name?t.name+"\n{white|占比"+e+"%}":""},rich:{white:{color:"#ddd",align:"center",padding:[3,0]}}},labelLine:{show:!0,color:"#ffff"},name:"",data:d,tooltip:{formatter:"{b}: {c}"}}]}}},{key:"getRandom",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1e3;return Math.floor(Math.random()*(t-80+1)+80)}},{key:"getLegendPosition",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this.border,i="3"===n?"12%":"8%",a=e?16:0,r="3"===n?4:3,s="3"===n?8:6;switch(t){case"1":return{legend:{top:i,left:10,orient:"horizontal"},grid:{top:s+20+"%",left:a+10+"%",right:"10%",bottom:"16%",containLabel:!1},center:["50%",r+55+"%"]};case"2":return{legend:{bottom:16,left:10,orient:"horizontal"},grid:{top:s+12+"%",left:a+10+"%",right:"10%",bottom:"32%",containLabel:!1},center:["50%",r+45+"%"]};case"3":return{legend:{top:i,left:4,orient:"vertical"},grid:{left:a+30+"%",top:s+12+"%",right:"10%",bottom:"16%",containLabel:!1},center:["55%",r+50+"%"]};case"4":return{legend:{top:i,right:4,orient:"vertical"},grid:{top:s+14+"%",right:"26%",left:a+10+"%",bottom:"14%",containLabel:!1},center:["45%",r+50+"%"]};case"5":return{legend:{show:!1},grid:{left:a+10+"%",right:"10%",top:s+12+"%",bottom:"14%",containLabel:!1},center:["45%",r+50+"%"]}}}},{key:"lineConfig",value:function(t){var e=this,n=["#1296FB","#8FD6FA","#0088CC","#06B76A","#CBC450","#FD8D1D"],i=t[0],a=i.rowDimName,r=i.landscape,s=i.legend,o=i.threeD,l=i.stack,c=i.lineType,h=o.split(","),d=a.map(function(t){return{value:t,textStyle:{color:"white"}}}),u=[],f=t.map(function(t,i){var a=t.contrastDimName,s=t.rowData;u[i]=a;var o="1"===c&&"1"===r&&{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:n[i]},{offset:.8,color:"rgba(255,255,255,0)"}],!1),shadowBlur:10,opacity:.3}}||null,h=s.map(function(t){return e.getRandom()});return{name:a,type:"1"===c?"line":"bar",areaStyle:o,smooth:!0,showSymbol:!0,symbol:"circle",symbolSize:8,barWidth:20,stack:"1"===l?"stack":null,data:h}}),p="2"===c&&"1"===r,v=this.getLegendPosition(s,p),m=Object.assign(v.legend,{textStyle:{fontSize:12,color:"white"},data:u}),b=Object.assign(v.grid,{}),y={type:"category",data:d,boundaryGap:"1"!==c,axisLine:{show:Boolean(+h[0]),lineStyle:{color:"#fff"}},axisTick:{show:Boolean(+h[0])},axisLabel:{textStyle:{fontSize:12}}},g={type:"value",axisLine:{show:Boolean(+h[1]),lineStyle:{color:"#fff"}},axisTick:{show:Boolean(+h[1])},splitLine:{show:Boolean(+h[1])},axisLabel:{show:Boolean(+h[1]),textStyle:{fontSize:12}}};return{color:["#1a9bfc","#99da69","#01babc","#5c8d89"],tooltip:{trigger:"axis",axisPointer:{lineStyle:{color:"#ddd"}},backgroundColor:"rgba(255,255,255,1)",padding:[5,10],textStyle:{color:"#7588E4"},extraCssText:"box-shadow: 0 0 5px rgba(0,0,0,0.3)"},grid:b,legend:m,xAxis:p&&g||y,yAxis:p&&y||g,series:f}}},{key:"scatterConfig",value:function(t){var e=this;console.log(t);var n=t[0],i=n.rowDimName,a=n.landscape,r=n.legend,s=n.threeD,o=[],l=t.map(function(t,n){var i=t.contrastDimName,r=t.rowData;return{name:o[n]=i,type:"scatter",smooth:!0,showSymbol:!0,symbol:"circle",symbolSize:function(t){return"1"===a&&Math.sqrt(t)||8},data:r.map(function(t){return e.getRandom()})}}),c=s.split(","),h=i.map(function(t){return{value:t,textStyle:{color:"white"}}}),d=this.getLegendPosition(r);return{color:["#1296FB","#8FD6FA","#0088CC","#06B76A","#CBC450","#FD8D1D"],legend:Object.assign(d.legend,{textStyle:{fontSize:12,color:"white"},data:o}),grid:Object.assign(d.grid,{}),tooltip:{padding:10,backgroundColor:"#222",borderColor:"#777",borderWidth:1,formatter:function(t){var e=t.value;return'<div style="border-bottom: 1px solid rgba(255,255,255,.3); font-size: 14px;padding-bottom: 7px;">'+t.seriesName+": "+e+"</div>"}},xAxis:{type:"category",data:h,axisLine:{show:Boolean(+c[0]),lineStyle:{color:"#fff"}},axisTick:{show:Boolean(+c[0])},axisLabel:{textStyle:{fontSize:12}}},yAxis:{type:"value",axisLine:{show:Boolean(+c[1]),lineStyle:{color:"#fff"}},axisTick:{show:Boolean(+c[1])},splitLine:{show:Boolean(+c[1]),lineStyle:{type:"dashed",opacity:.6}},axisLabel:{show:Boolean(+c[1]),textStyle:{fontSize:12}}},series:l}}},{key:"radarConfig",value:function(t){var e,n,i=this,a=t[0],r=a.rowDimName,s=a.legend,o=a.area,l=r.map(function(t){return{text:t,max:function(t){return 1.5*t.max}}}),c=[],h=t.map(function(t,e){var n=t.rowData,a=t.contrastDimName;return c[e]=a,{value:n.map(function(t){return i.getRandom()}),name:a}}),d=this.getLegendPosition(s);return{color:["#1296FB","#8FD6FA","#0088CC","#06B76A","#CBC450","#FD8D1D"],tooltip:{trigger:"axis"},legend:Object.assign(d.legend,{textStyle:{color:"#f2f2f2",fontSize:12},itemWidth:12,itemHeight:12,data:c}),radar:[{indicator:l,center:d.center,radius:"55%",shape:"1"===o?"polygon":"circle",name:{textStyle:{color:"white",fontSize:12}},nameGap:10,splitLine:{lineStyle:{color:"#0b5263",opacity:.5,width:2}},splitArea:{areaStyle:(e={color:"#E9E6C9",opacity:1,shadowBlur:45,shadowColor:"rgba(0,0,0,.5)",shadowOffsetX:0,shadowOffsetY:15},n="opacity",.5,n in e?Object.defineProperty(e,n,{value:.5,enumerable:!0,configurable:!0,writable:!0}):e[n]=.5,e)},axisLine:{show:!0,lineStyle:{color:"#189cbb",type:"dashed"}}}],series:[{type:"radar",tooltip:{trigger:"item"},data:h,symbolSize:2,itemStyle:{normal:{borderColor:"#ffc72b",borderWidth:2}},lineStyle:{normal:{color:"#fff",width:2}},areaStyle:{normal:{shadowBlur:13,shadowColor:"rgba(127,95,132,.3)",shadowOffsetX:0,shadowOffsetY:10,opacity:.6}}}]}}}]),t}();e.Chart=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(e,n){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var i=n.id,a=n.title,r=n.size,s=n.borderType;this.box=e,this.w=r[0],this.h=r[1],this.id=i,this.title=a,this.type=+s,this.init()}return i(t,[{key:"init",value:function(){this.box.html(this.render())}},{key:"getPoint1",value:function(t){var e=t.rotate,n=t.position,i="top"===n||"bottom"===n?950:500,a=950===i,r=a?250:115,s=("bottom"===n?235:"top"===n&&225)||87.5,o=a?0:25,l=("bottom"===n?12.5:"top"===n&&30)||12.5,c=[];c[0]=25,c[5]=e*i-25-o,c[1]=s+25+(e-1)*r,c[2]=c[1]+l,c[4]=e*i-c[1]-o,c[3]=c[4]-l;var h=a?0:1,d=1-h,u=[],f="top"===n||"left"===n?0:"bottom"===n&&500*this.h-25||950*this.w;u[d]=f;var p=("top"===n?50:"left"===n&&25)||"bottom"===n&&500*this.h||950*this.w-25;return c.map(function(t,e){return u[h]=t,u[d]=3==e||2==e?p:f,u.join(" ")})}},{key:"getPoint2",value:function(t){var e=t.rotate,n=t.position,i="top"===n||"bottom"===n?950:500,a=[];if("top"===n)a[0]=80,a[3]=i*e-30,a[2]=a[3]-150-100*(e-1),a[1]=a[2]-60;else{var r=("left"===n?80:"right"===n&&100)||50;a[0]=r,a[1]=i*e-50}var s=950===i?0:1,o=1-s,l=[],c="top"===n||"left"===n?0:"bottom"===n&&500*this.h||950*this.w;return l[o]=c,a.map(function(t,e){return l[s]=t,2==e&&(l[o]=60),l.join(" ")})}},{key:"getPath",value:function(){var t=this,e=["","getPoint1","getPoint2"][this.type];return["top","right","bottom","left"].map(function(n,i){var a=i%2==0,r=t[e]({position:n,rotate:a&&t.w||t.h});return 1<i&&r.reverse().join(" , ")||r.join(" , ")})}},{key:"render",value:function(){return this[["","renderBoder1","renderBoder2","renderBoder3"][this.type]]()}},{key:"renderBoder1",value:function(){var t=this.id;return'\n\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg"   xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 '+(950*this.w+20)+" "+(500*this.h+20)+'" preserveAspectRatio="none">\n\t\t\t\t\t\t\t<defs >\n\t\t\t\t\t\t\t   <desc>边框形状的多边形</desc>\n\n\t\t\t\t\t\t\t  \t<filter width="100%" height="100%" x="0" y="0" id="blur'+t+'" filterUnits="objectBoundingBox">\n\t\t\t\t\t\t\t\t  \t<feGaussianBlur stdDeviation="15" in="SourceGraphic" />\n\t\t\t\t\t\t\t\t</filter>\n\t\t\t\t\t    \t\t<filter x="0" y="0" width="100%" height="100%" filterUnits="objectBoundingBox" id="filter'+t+'">\n\t\t\t                        <feOffset dx="0" dy="-10" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset>\n\t\t\t                        <feGaussianBlur stdDeviation="15" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>\n\t\t\t                        <feColorMatrix values="0 0 0 0 0.266666667   0 0 0 0 0.694117647   0 0 0 0 0.607843137  0 0 0 0.7 0" in="shadowBlurOuter1" type="matrix" result="shadowMatrixOuter1"></feColorMatrix>\n\t\t\t                        <feMerge>\n\t\t\t                            <feMergeNode in="shadowMatrixOuter1"></feMergeNode>\n\t\t\t                            <feMergeNode in="SourceGraphic"></feMergeNode>\n\t\t\t                        </feMerge>\n                    \t\t\t</filter>\t\t\n\t\t\t\t\t\t\t\t<desc>四个角的形状</desc>\n\n\t\t\t\t\t\t\t\t<g id="angle'+t+'" class="angle" >\n\t\t\t\t\t\t\t\t\t<path  d="M26.48 4.94L68.35 4.94L70.56 9.46L92.41 9.46L87.78 0.01L68.35 0.01L68.35 0.01L24.67 0.01L24.67 0.01L24.67 0.01L0 27.82L0 27.82L0 74.38L0 77.07L0 98.99L8.38 104.2L8.38 79.59L4.35 77.07L4.37 77.07L4.37 29.87L4.37 29.87L26.48 4.94Z"  />\n\t\t\t\t\t\t\t\t\t<path d="M25.21 27.87L25.21 8.18L7.75 27.87L7.75 27.87L25.21 27.87Z" id="a4eOZ2LBP"/>\n\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t<desc>小菱形</desc>\n\t\t\t\t\t\t\t\t<pattern id="pattern'+t+'" x="0" y="0" width="10" height="10"\n\t\t\t\t\t\t\t           patternUnits="userSpaceOnUse" >\n\t\t\t\t\t\t\t     \t<rect x="2.5" y="0" width="5" height="10" fill="#3B9CCB"/>\n\t\t\t\t\t\t\t    </pattern>\n\t\t\t\t\t\t\t    <g id="rhombic'+t+'" class="rhombic" fill="#3B9CCB">\n\t\t\t\t\t\t\t   \t\t<desc>大菱形左</desc>\n\t\t\t\t\t\t\t    \t<rect x="105" y="0" width="30" height="10"  />\n\t\t\t\t\t\t\t\t\t<rect x="140" y="0" width="'+(60+100*(this.w-1))+'" height="10" fill="url(#pattern'+t+')" />\n\t\t\t\t\t\t\t\t\t<desc>大菱形右</desc>\n\t\t\t\t\t\t\t\t\t<rect x="'+(205+100*(this.w-1))+'" y="0" width="30" height="10" />\n\t\t\t\t\t\t\t    </g>\n\t\t\t\t\t\t\t\t\t<image xlink:href="./img/view_bg1.png" ></image>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</defs>\n\n\t\t\t\t\t\t\t<g transform="translate(10 10)" >\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<g style="opacity:0.3;" >\n\t\t\t\t\t\t\t\t\t<polygon id="shape"  fill="#d2ebf0" class="shade" stroke="" points="'+this.getPath().join(" , ")+'"  />\n\t\t\t\t\t\t\t\t</g>\n\n\t\t\t\t\t\t\t\t\t<polygon   fill="none" filter="url(#blur'+t+')" stroke-width="4" stroke="#d2ebf0" points="'+this.getPath().join(" , ")+'"  />\n\n\t\t\t\t\t\t\t\t<g fill="#95d3df">\n\t\t\t\t\t\t\t\t\t<use xlink:href="#angle'+t+'"/>\n\t\t\t\t\t\t\t\t\t<use xlink:href="#angle'+t+'" transform="scale(-1,1) translate(-'+950*this.w+')" ></use>\n\t\t\t\t\t\t\t\t\t<use xlink:href="#angle'+t+'" transform="scale(1,-1) translate(0 -'+(500*this.h-25)+')"/>\n\t\t\t\t\t\t\t\t\t<use xlink:href="#angle'+t+'" transform="scale(-1,-1) translate(-'+950*this.w+" -"+(500*this.h-25)+')"/>\n\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t<g \tfill="#95d3df" >\n\t\t\t\t\t\t\t\t   <use xlink:href="#rhombic'+t+'" transform="skewX(30)" />\n\t\t\t\t\t\t\t\t   <use xlink:href="#rhombic'+t+'" transform="translate('+(950*this.w-210-130-100*(this.w-1))+' 0) skewX(-30)" />\n\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<text x="'+950*this.w/2+'" y="30" fill="white" text-anchor="middle" font-size="2em" letter-spacing="0.2em" lengthAdjust="spacing" > '+this.title+" </text>\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t</svg>\n\n\t\t\t\t"}},{key:"renderBoder2",value:function(){var t=this.id;return'\n\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg"  xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 '+(950*this.w+20)+" "+(500*this.h+20)+'" preserveAspectRatio="none">\n\t\t\t\t\t\t\t<defs >\n\t\t\t\t\t\t\t\t\t<linearGradient id="line'+t+'" gradientUnits="objectBoundingBox">\n\t\t\t\t\t                  <stop offset="0" stop-color="#2c93d2"/>\n\t\t\t\t\t                  <stop offset="1" stop-color="#3fbccf"/>\n\t\t\t\t\t              \t</linearGradient>\n\t\t\t\t\t              \t<g id="border'+t+'">\n\t\t\t\t\t\t\t\t\t\t<polygon   points="'+this.getPath().join(" , ")+'"  \n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t              \t</g>\n\t\t\t\t\t\t\t</defs>\n\n\t\t\t\t\t\t\t<g transform="translate(10 10)" stroke="url(#line'+t+')" stroke-width="5" >\n\t\t\t\t\t\t\t\t\t<use xlink:href="#border'+t+'" fill="none"/>\n\t\t\t\t\t\t\t\t\t<defc>三角形</defc>\n\t\t\t\t\t\t\t\t\t<path  fill="none" d="M 0 0 L 50 0 L 0 50 Z"  />\n\t\t\t\t\t\t\t\t\t<defc>斜线</defc>\n\t\t\t\t\t\t\t\t\t<line x1="'+(935+950*(this.w-1))+'" y1="'+(435+500*(this.h-1))+'" x2="'+(885+950*(this.w-1))+'" y2="'+(485+500*(this.h-1))+'"  />\n\t\t\t\t\t\t\t\t\t<line x1="'+(740+850*(this.w-1))+'" y1="0" x2="'+(785+850*(this.w-1))+'" y2="45"  />\n\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t<text x="'+(950*this.w-90-150-100*(this.w-1))/2+'" y="50" fill="white" text-anchor="middle" font-size="2em" letter-spacing="0.2em" lengthAdjust="spacing" > '+this.title+" </text>\n\n\t\t\t\t\t</svg>\n\n\t\t\t\t"}},{key:"renderBoder3",value:function(){var t=this.id;return'\n\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg"  xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 '+(950*this.w+20)+" "+(500*this.h+20)+'" preserveAspectRatio="none">\n\t\t\t\t\t\t\t<defs >\n\t\t\t\t\t\t\t\t\t<linearGradient id="line'+t+'" gradientUnits="objectBoundingBox">\n\t\t\t\t\t                  <stop offset="0" stop-color="#2c93d2"/>\n\t\t\t\t\t                  <stop offset="1" stop-color="#3fbccf"/>\n\t\t\t\t\t              \t</linearGradient>\n\t\t\t\t\t              \t<filter width="100%" height="100%" x="0" y="0" id="blur'+t+'" filterUnits="objectBoundingBox">\n\t\t\t\t\t\t\t\t  \t\t<feGaussianBlur stdDeviation="5" in="SourceGraphic" />\n\t\t\t\t\t\t\t\t\t</filter>\n\t\t\t\t\t              \t<g id="border'+t+'" stroke-opacity="0.8">\n\t\t\t\t\t\t\t\t\t\t<rect x="0" y="0" rx="15" ry="15" width="'+950*this.w+'" height="'+500*this.h+'" />\n\t\t\t\t\t              \t</g>\n\t\t\t\t\t              \t<g id="title'+t+'" transform="translate(30 20)" stroke-width="2">\n\t\t\t\t\t\t\t\t\t\t<polygon  fill="none" points="0 0 ,800 0 ,800 30,770 60,0 60" />\n\t\t\t\t\t              \t</g>\n\t\t\t\t\t              \t<g id="radius'+t+'" stroke-width="6"  stroke="#3fbccf">\n\t\t\t\t\t\t\t\t\t\t<path d="M55 0 h-40 A15 15 0 0 0 0 15 v40"  fill="none" stroke-linecap="round" />\n\t\t\t\t\t              \t</g>\n\t\t\t\t\t\t\t</defs>\n\n\t\t\t\t\t\t\t<g transform="translate(10 10)" stroke="url(#line'+t+')" stroke-width="3" fill="none">\n\t\t\t\t\t\t\t\t\t<use xlink:href="#border'+t+'" />\n\t\t\t\t\t\t\t\t\t<defc>标题</defc>\n\t\t\t\t\t\t\t\t\t<use xlink:href="#title'+t+'" />\n\t\t\t\t\t\t\t\t\t<use xlink:href="#radius'+t+'"  />\n\t\t\t\t\t\t\t\t\t<use xlink:href="#radius'+t+'"  transform="scale(-1 1) translate('+950*-this.w+' 0)"/>\n\t\t\t\t\t\t\t\t\t<use xlink:href="#radius'+t+'" transform="scale(1 -1) translate(0 '+500*-this.h+')" />\n\t\t\t\t\t\t\t\t\t<use xlink:href="#radius'+t+'" transform="scale(-1 -1) translate('+950*-this.w+" "+500*-this.h+')" />\n \t\t\t\t\t\t\t</g>\n \t\t\t\t\t\t\t<text x="60" y="70" fill="white"  font-size="2em" letter-spacing="0.2em" lengthAdjust="spacing" > '+this.title+" </text>\n\t\t\t\t\t</svg>\n\n\t\t\t\t"}}]),t}();e.Border=a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(14),r=n(13),s=n(0);function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}n(15),new s.RippleBtn;var l=window.jsp_config.baseUrl,c=function(){function t(){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var e=window.parent;this.layout_id=e.menuID,this.layoutName=e.menuName,this.app=$("#app"),this.maxWindow=$("#maxWindow"),this.timeBox=$("#g-timeContent"),this.maxTimer=null,this.maxView=null,this.unit=new s.Unit,this.items=[],this.apiData=[],this.init(),this.handle()}return i(t,[{key:"init",value:function(){this.getPre(),this.renderModal(),this.initHead(),this.initCalarder()}},{key:"initCalarder",value:function(){var e=this;this.modal=new s.SModal,new s.SInp,this.calendar=new s.Calendar($("#calendarBox"),$("#viewShowTime"),{rotate:4,style:2,callback:function(){var n=t.activeView;"all"===n?e.filterAll():e.filterTime(n)}})}},{key:"initHead",value:function(){$("#viewsHead").width();var t='<svg xmlns="http://www.w3.org/2000/svg"  xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 1500 50" preserveAspectRatio="xMidYMid slice">\n\t\t\t\t\t\t\t\t<defs >\n\t\t\t\t\t\t\t\t\t<linearGradient id="linear" gradientUnits="objectBoundingBox">\n\t\t\t    \t                  <stop offset="0" stop-color="#005792"  stop-opacity="1"/>\n\t\t\t    \t                  <stop offset="1" stop-color="#064782" stop-opacity="0"/>\n\t\t\t    \t              \t</linearGradient>\n\t\t\t    \t              \t<linearGradient id="down" xlink:href="#linear" \n\t\t\t\t\t\t\t\t\t\tx1="0" y1="100%" x2="0" y2="0">\n\t\t\t    \t              \t  <stop offset="0" stop-color="#064782"  stop-opacity="1"/>\n\t\t\t    \t                  <stop offset="1" stop-color="#1c819e" stop-opacity="0"/>\n\t\t\t    \t              \t</linearGradient>\n\t\t\t\t\t\t\t\t    <g id="right" >\n\t\t\t\t\t\t\t\t   \t\t<desc>左</desc>\n\t\t\t\t\t\t\t\t    \t<polygon points="0 0 , 400 0,375 25,0 25"  stroke="" stroke-width="" fill="url(#linear)" />\n\t\t\t\t\t\t\t\t    \t<line x1="405" y1="0" x2="380" y2="25" stroke-linecap="round" stroke="#64ACCA" stroke-width="1"/>\n\t\t\t\t\t\t\t\t    \t<line x1="415" y1="0" x2="385" y2="30" stroke-linecap="round" stroke="#64ACCA" stroke-width="3"/>\n\t\t\t\t\t\t\t\t    </g>\n\t\t\t\t\t\t\t\t   \t<g id="center">\n\t\t\t\t\t\t\t\t    \t\t<polygon points="575 0,625 50,875 50,925 0"  fill="url(#down)"/>\n\t\t\t\t\t\t\t\t    \t\t<text x="750" y="35" fill="white" id="viewName" text-anchor="middle" font-size="22" letter-spacing="0.2em" lengthAdjust="spacing" >\n\t\t\t\t\t\t\t\t    \t\t'+this.layoutName+'\n\t\t\t\t\t\t\t\t    \t\t</text>\t\t\t\t\n\t\t\t\t\t\t\t\t    </g>\n\t\t\t\t\t\t\t\t</defs>\n\t\t\t\t\t\t\t\t<g >\n\t\t\t\t\t\t\t\t\t<use xlink:href="#right"   />\n\t\t\t\t\t\t\t\t\t<use xlink:href="#right"  transform="scale(-1,1) translate(-1500)" />\n\t\t\t\t\t\t\t\t\t<use xlink:href="#center"  />\n\t\t\t\t\t\t\t\t\t<polyline points="0 0 ,575 0,625 50,875 50,925 0,1500 0" fill="none" stroke="#64ACCA" stroke-width="2.5"/> \n\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t</svg>';$("#viewsHead").html(t)}},{key:"getPre",value:function(){window.location.search.includes("pre")&&this.app.append('<span class="backManage" id="back"><i class="fa fa-chevron-circle-left " ></i></span>')}},{key:"IntervalreFresh",value:function(t,e,n){switch(t){case"timeReal":var i=n.tabInfo,r=i.ref_time,s=i.ref_frequency;if("0"!==s){var o=1e3*r*["",1,60,3600][+s];e[t].timer=setInterval(function(){a.api.getTableInfo(n.tabInfo).then(function(t){e.timeReal.init(t)})},o)}}}},{key:"createView",value:function(t){var e=this,n=t.id,i=t.type,s=t.item,o=t.box,l=t.size,c=t.borderType,h={table:{getDataUrl:"getTableData",configName:"tabInfo"},timeReal:{getDataUrl:"getTableData",configName:"tabInfo"},chart:{getDataUrl:"getGraphData",configName:"graphInfo"},editView:{getDataUrl:"getAssembly"}};a.api[h[i].getDataUrl](n).then(function(t){if(t){var a="editView"===i?"":t[h[i].configName].chartName,d="editView"===i?t.assembly_data:t;e.items[s]=new r.View(o,{id:n,type:i,index:s,viewTitle:a,size:l,borderType:c},d),e.apiData[s]={viewType:i},e.apiData[s].params="editView"===i?null:d.tabInfo||d.graphInfo,e.IntervalreFresh(i,e.items[s],d)}else e.unit.tipToast("没数据！",2),o.removeClass("view-fill"),o.attr("echo-id","")})}},{key:"renderModal",value:function(){var t=this,e=this;a.api.showLayoutModel(this.layout_id).then(function(n){if(n.modelData){var i=n.model.replace(/draggable="true"/,"");$("#viewsContent").html(i);var a=$("#viewTemplate").css("backgroundImage");t.maxWindow.css("backgroundImage",a),JSON.parse(n.modelData).filter(function(t){return t.viewID}).map(function(t,n){var i,a,r,s,o,l,c,h,d;i=n,r=(a=t).point,s=a.size,o=a.viewID,l=a.type,c=a.borderType,h=$("#"+r[2]),d=["line","pie","scatter","bar","rader"].includes(l)?"chart":l,e.createView({item:i,box:h,type:d,id:o,size:s,borderType:c})})}else console.log("该视图已经不存在！")})}},{key:"MaxView",value:function(t){var e=this,n=t.borderType,i=t.option,s=t.index,o=t.viewTitle,l=t.viewType,c=t.id,h="2"==n?"border3-opt":"",d=this.maxWindow,u='\n\t\t\t\t\t\t\t<div class="view-item" echo-id="max" style="width:100%;height:100%;">\n\t\t\t\t\t\t       '+("0"===n?"":' <div class="bgSvg"></div>')+'\n\t\t\t\t\t\t        <div class="view-content" >\n\t\t\t\t\t\t        \t<div class="view-optBox '+h+'" >\n\t\t\t\t\t\t        \t\t<div class="btn-handle">\n\t\t\t\t\t\t\t\t\t\t\t<span class="fa fa-bars" ></span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t        \t\t<div class="view-btns" echo-id="'+c+'" echo-index="'+s+'">\n\t\t\t\t\t\t\t\t\t\t\t<span class="fa fa-compress view-btn" sign="compress" title="最小化"></span>\n\t\t\t\t\t\t\t\t\t\t\t<span class="fa fa-file-excel-o view-btn" sign="excel" title="导出excel"></span>\n\t\t\t\t\t\t\t\t\t\t\t<span class="fa fa-file-image-o view-btn" sign="image" title="导出图片"></span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t        \t</div>\n\t\t\t\t\t\t            <div class="view_main '+l+'_main"></div>\n\t\t\t\t\t\t        </div>\n\t\t\t\t\t\t    </div>\n\t\t\t\t\t\t\t';d.html(u);var f=d.find(".view_main"),p=[3,3];"table"===l||"timeReal"===l?a.api.getTableData(c).then(function(t){if("table"===l)new r.STable(f,{borderType:n,size:p},t);else{var i=new r.TimeView(f,{borderType:n,size:p},t),s=t.tabInfo,o=t.tabInfo;o.ref_time,"0"!==o.ref_frequency&&(e.maxTimer=setInterval(function(){console.log("dddd"),a.api.getTableInfo(s).then(function(t){i.init(t)})},3e3))}}):"chart"==l?echarts.init(f[0]).setOption(i):"editView"==l&&f.html(i),"0"!==n&&new r.Border(d.find(".bgSvg"),{id:"max",title:o,borderType:n,size:p})}},{key:"Toexcel",value:function(t,e,n){var i=[],r=n.WdArr,s=n.viewTitle,c=n.chartType,h=[],d=[];if("table"==e)a.api.getTableData(t).then(function(t){i=t.data,c.col_wd.map(function(t,e){i[0][e]=r[+t]}),a.api.getExeclld({data:i,fileName:s}).then(function(t){t&&(window.location.href=l+"Expo/getExecl?id="+t)})});else if("chart"==e){var u=t.xAxis,f=t.series,p=t.Dim,v=t.legend,m=t.radar;switch(c){case"4":(d=u[0].data.map(function(t){return t.value})).unshift(r[+p.contrastDim]+"/"+r[+p.rowDim]),h=f.map(function(t){var e=t.data.map(function(t){return t||"--"});return[t.name].concat(o(e))}),i=[d].concat(o(h));break;case"5":h.push(" "),(d=v[0].data.map(function(t){var e=t.value||"--";return h.push(e),t.name})).unshift(r[+p.rowDim]),i=[d,h];break;case"6":h=f[0].data.map(function(t){var e=t.value.map(function(t){return t||"--"});return[t.name].concat(o(e))}),(d=m[0].indicator.map(function(t){return t.text})).unshift(r[+p.contrastDim]+"/"+r[+p.rowDim]),i=[d].concat(o(h))}a.api.getExeclld({data:i,fileName:s}).then(function(t){t&&(window.location.href=l+"Expo/getExecl?id="+t)})}}},{key:"Toimage",value:function(t){var e=t.viewTitle,n=this.maxWindow,i=!n.is(":hidden");if(t.border){var a=i&&n.find(".bgSvg")||t.border.box,r=i&&n.find("canvas")||$(t.chart.Box).find("canvas"),s=a.html(),o=new Image,l=new Image,c=new Image;o.src="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(s))),l.src="./img/view_bg1.png",c.src=r[0].toDataURL("png");var h=document.createElement("canvas");h.width=a.width(),h.height=a.height();var d=h.getContext("2d");o.onload=function(){setTimeout(function(){d.drawImage(l,0,0),d.drawImage(o,0,0),d.drawImage(c,0,.05*a.height());var t=document.createElement("a");document.body.appendChild(t),t.href=h.toDataURL("image/png"),t.download=e+".png",t.click(),$(t).remove()},1e3)}}}},{key:"filterAll",value:function(){var t=this,e=this.calendar.value;this.apiData.map(function(n,i){var r=t.items[i],s=n.viewType,o=n.params;if(["chart","table"].includes(s)){var l="chart"===s?"getGraphInfo":"getTableInfo";o.startTime=e[0].join(""),o.endTime=e[1].join(""),a.api[l](o).then(function(t){r[s].init(t)})}})}},{key:"filterTime",value:function(t,e){var n=this.items[t],i=this.apiData[t],r=i.viewType,s=i.params,o=this.calendar.value,l="chart"===r?"getGraphInfo":"getTableInfo";e?(s.startTime=null,s.endTime=null):(s.startTime=o[0].join(""),s.endTime=o[1].join("")),s.time_id,s.time_start,a.api[l](s).then(function(t){n[r].init(t)})}},{key:"handle",value:function(){var e=this.maxWindow,n=$(".time-content-item");$("#g-timeContent").on("click",".m-tab-item",function(){var t=$(this),e=t.index();n.eq(e).addClass("active").siblings().removeClass("active"),t.addClass("active").siblings().removeClass("active")}),$("#globalSet").on("click",".global-itme",function(){switch($(this).attr("sign")){case"filter":var e=["chart","table"];if(!h.apiData.some(function(t){return e.includes(t.viewType)}))return void h.unit.tipToast("不存在可以刷新的视图！",2);h.modal.show(h.timeBox),t.activeView="all";break;case"refresh":h.apiData.map(function(t,e){var n=t.viewType;"table"!==n&&"chart"!==n||h.filterTime(e,!0)})}}),this.app.on("click","#back",function(){var t=$("#slide",window.parent.document),e=$("#content",window.parent.document),n=t.hasClass("collapsed")?45:250;t.animate({width:n},500,function(){window.history.back(),e.removeClass("no-head")})}),this.app.on("click",".btn-handle",function(){$(this).toggleClass("active")}),this.app.on("click",".view-btn",function(){var n=$(this).attr("sign"),i=$(this).parent().attr("echo-index"),a=h.items[+i],r=a.viewType,s=a.viewTitle,o=a.borderType,l=a.id,c=a.size,d=null,u=null,f=null;if("table"===r){var p=a.table,v=(p.container,p.title,p.data,p.config);d=a.id,u=v,f=["","时间","科室","指标","维度值"]}else if("chart"===r){var m=a.chart,b=m.Box,y=m.type,g=echarts.getInstanceByDom(b);u=y,d=g.getOption(),f=["","时间","科室","维度值","指标"]}else if("timeReal"===r){var w=a.timeReal;w.box;w.title,w.data,w.config,d=a.id}else{var x=a.editView.box;d=x.html()}switch(t.activeView=i,n){case"refresh":h.filterTime(i,!0);break;case"excel":h.Toexcel(d,r,{WdArr:f,chartType:u,viewTitle:s});break;case"expand":$("#slide",window.parent.document).animate({width:0},500,function(){e.show(),h.MaxView({option:d,borderType:o,index:i,viewTitle:s,viewType:r,id:l,size:c})});break;case"compress":h.maxTimer&&(console.log("qiangc"),clearInterval(h.maxTimer));var k=$("#slide",window.parent.document),T=k.hasClass("collapsed")?45:250;k.animate({width:T},500,function(){e.html(""),e.hide()});break;case"image":h.Toimage(a);break;case"filter":var C=h.apiData[i].params,S=C.time_id,j=C.time_start,B=C.startTime||S,A=C.endTime||j;h.calendar.setTime([B,A]),h.modal.show(h.timeBox)}})}}]),t}();c.activeView=null;var h=new c}],[[54,0,1]]]);
//# sourceMappingURL=ManageViews.chunk.js.map