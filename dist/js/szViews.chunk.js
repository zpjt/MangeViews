(window.webpackJsonp=window.webpackJsonp||[]).push([[8],[function(t,e,n){"use strict";n(1);var a=window.jsp_config.baseUrl;hookAjax({onreadystatechange:function(t){if(t.responseXML)return window.open(a+"login.html","_top"),!0},onload:function(t){if(t.responseXML)return window.open(a+"login.html","_top"),!0}})},function(t,e,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){function e(a){if(n[a])return n[a].exports;var i=n[a]={exports:{},id:a,loaded:!1};return t[a].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){n(1)(window)},function(t,e){t.exports=function(t){t.hookAjax=function(t){function e(e){return function(){var n=this.hasOwnProperty(e+"_")?this[e+"_"]:this.xhr[e],a=(t[e]||{}).getter;return a&&a(n,this)||n}}function n(e){return function(n){var a=this.xhr,i=this,s=t[e];if("function"==typeof s)a[e]=function(){t[e](i)||n.apply(a,arguments)};else{var o=(s||{}).setter;n=o&&o(n,i)||n;try{a[e]=n}catch(a){this[e+"_"]=n}}}}function i(e){return function(){var n=[].slice.call(arguments);if(!t[e]||!t[e].call(this,n,this.xhr))return this.xhr[e].apply(this.xhr,n)}}return window._ahrealxhr=window._ahrealxhr||XMLHttpRequest,XMLHttpRequest=function(){for(var t in this.xhr=new window._ahrealxhr,this.xhr){var s="";try{s=a(this.xhr[t])}catch(t){}"function"===s?this[t]=i(t):Object.defineProperty(this,t,{get:e(t),set:n(t)})}},window._ahrealxhr},t.unHookAjax=function(){window._ahrealxhr&&(XMLHttpRequest=window._ahrealxhr),window._ahrealxhr=void 0},t.default=t}}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Search=e.RippleBtn=e.DropMenu=e.SInp=e.SComboTree=e.Tree=e.Calendar=e.SModal=e.SCombobox=e.Unit=void 0;var a,i=(a=n(9))&&a.__esModule?a:{default:a},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}();n(8),n(7),n(6),n(3);var o=n(5);function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=function(){function t(){r(this,t),this.tipInit()}return s(t,[{key:"JsonTofind",value:function(t,e){var n=Object.assign({},{childField:"children",keyField:"id",data:[]},t),a=n.childField,i=n.keyField,s=null;return function t(n){return n.find(function(n){var o=n[a];return n[i]===e?(s=n,!0):o.length?t(o):void 0})}(n.data),s}},{key:"tipToast",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n='<div class="tip-item tip1">\n\t\t\t\t\t\t\t<p class="tip-close">\n\t\t\t\t\t\t\t\t<span><i class="sicon '+["sicon-error","sicon-detail","sicon-warn"][+e]+'"></i>&nbsp;'+["错误提示","成功提示","警告提示"][+e]+'</span>\n\t\t\t\t\t\t\t\t<span class="j-close"><i class="fa fa-times"></i></span>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p class="tip-txt"><span>'+t+'</span></p>\n\t\t\t\t\t\t\t<div class="tip-progress"></div>\n\t\t\t\t\t\t</div>';this.$tipBox.append(n);var a=$(".tip-item:last-child");setTimeout(function(){a.remove()},6e3)}},{key:"initTipM",value:function(t,e,n){setTimeout(function(){t.html("确定删除吗？"),e.removeClass("g-status"),e.attr("xlink:href","#g-warn"),n.attr("stroke","#F8C186")},200)}},{key:"renderTipM",value:function(t,e){var n={"#g-success":"#A5DC86","#g-load":"grey","#g-error":"red"};t.attr({"xlink:href":e,stroke:n[e]}),$("#g-out").attr("stroke",n[e])}},{key:"tipInit",value:function(){this.$tipBox=$("#tipToast"),this.$tipBox.on("click",".j-close",function(){$(this).closest(".tip-item").remove()})}}]),t}(),c=function(){function t(e,n){r(this,t),this.config=Object.assign({},{serachCallback:function(){},closeCallback:function(){}},n),this.box=e,this.renderSearch(),this.handle()}return s(t,[{key:"renderSearch",value:function(){this.box.html('\n\t\t\t\t\t<div class="input-box">\n\t\t\t\t\t\t<input type="text" class="s-inp search-inp" id="searchInp" placeholder="搜索关键字....">\n\t\t\t\t\t\t<button class="s-btn search-btn" id="searchBtn">\n\t\t\t\t\t\t\t<span class="search-icon"></span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<span class="search-close" id="searchClose">\n\t\t\t\t\t\t<i class="fa fa-times fa-2x"></i>\n\t\t\t\t\t</span> ')}},{key:"handle",value:function(){var t=this.box,e=this.config,n=e.serachCallback,a=e.closeCallback;t.on("click",".search-btn",function(){t.hasClass("active-search")||(t.addClass("active-search"),n())}),t.on("click",".search-close",function(){t.removeClass("active-search"),a()})}}]),t}(),u=function(){function t(e){r(this,t),this.config=Object.assign({},{opacity:.5,speed:.6,bgColor:"#fff"},e),this.els=$(".m-rippleBtn"),this.handle()}return s(t,[{key:"init",value:function(t){}},{key:"renderRipple",value:function(t,e){var n=this.getPosition(t[0],e);this.createRipple(t,n)}},{key:"getPosition",value:function(t,e){var n=t.getBoundingClientRect(),a=n.width,i=n.height,s=n.x,o=n.y,r=Math.max(a,i),l=e.clientX-s-r/2;return{radiusRange:r,top:e.clientY-o-r/2,left:l}}},{key:"createRipple",value:function(t,e){var n=e.radiusRange,a=e.top,i=e.left,s=this.config,o=s.opacity,r=s.speed,l='<span class="u-ripple" style="opacity:'+o+";background:"+s.bgColor+";animation-duration:"+r+"s;width:"+n+"px;height:"+n+"px;top:"+a+"px;left:"+i+'px"></span>';t.append(l)}},{key:"handle",value:function(){var t=this;this.els.on("click",function(e){var n=$(this);t.renderRipple(n,e)}),this.els.on("animationend",".u-ripple",function(t){$(this).remove()})}}]),t}(),d=function(){function t(e,n){r(this,t),this.config=Object.assign({},{data:[],buttonIcon:"fa fa-plus",dropIcon:"fa fa-chevron-down",buttonTxt:"新增",itemH:30,itemCallback:function(){},slideCallBack:function(){}},n),this.box=e,this.init(),this.handle()}return s(t,[{key:"init",value:function(){var t=this.renderButtons(),e='<ul class="menu-box">'+this.renderDrop().join("")+"</ul>";this.box.html(t+e)}},{key:"renderDrop",value:function(){var t=this.config,e=t.data,n=t.itemH;return e.map(function(t,e){var a=t.icon,i=t.text;return'<li class="menu-item" echo-data = \''+t.id+"' style=\"top:"+e*n+'px">\n  \t\t\t\t\t<span class="drop-icon">\n  \t\t\t\t\t\t<i class=\''+a+'\'></i>\n  \t\t\t\t\t</span>\n  \t\t\t\t\t<span class="drop-text">\n  \t\t\t\t\t\t'+i+"\n  \t\t\t\t\t</span>\n\t\t\t\t</li>"})}},{key:"renderButtons",value:function(){var t=this.config,e=t.dropIcon;return'<div class="menu-btn">\n\t\t\t\t\t<span>\n\t\t\t\t\t  <i class="'+t.buttonIcon+'"></i>\n\t\t\t\t\t\t'+t.buttonTxt+'\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class="s-Divider"></span>\n\t\t\t\t\t<span class="dropmenu-icon">\n\t\t\t\t\t\t<i class="'+e+'"></i>\n\t\t\t\t\t</span>\n\t\t\t\t</div>'}},{key:"reload",value:function(t){this.config.data=t;var e=this.renderDrop().join("");this.box.find(".menu-box").html(e)}},{key:"handle",value:function(){var t=this;this.box.on("click",".menu-btn",function(){var e=$(this),n=e.parent(".drop-menu"),a=e.siblings(".menu-box");n.hasClass("active")?(n.removeClass("active"),window.requestAnimationFrame(function(){a.hide()})):(a.show(),t.config.slideCallBack(),window.requestAnimationFrame(function(){n.addClass("active")}))}),this.box.on("click",".menu-item",function(){var e=$(this);t.config.itemCallback(e),t.box.removeClass("active"),t.box.children(".menu-box").hide()})}}]),t}(),h=function(){function t(){r(this,t),this.init()}return s(t,[{key:"init",value:function(){this.handle()}},{key:"handle",value:function(){$(".s-inp-box .s-inp.s-valid").on("blur",function(){!this.value.trim()&&$(this).addClass("no-fill")||$(this).removeClass("no-fill")}),$(".num-valid").on("blur",function(){this.validity.valid?$(this).removeClass("no-fill"):$(this).addClass("no-fill")})}}]),t}(),f=function(){function t(e,n){r(this,t),this.config=Object.assign({},{prompt:"请选择...",slideIcon:"fa fa-chevron-down",data:[],dropIcon:"fa fa-circle",textField:"text",idField:"id",validCombo:!0,dropFormatter:null,multiply:!1,defaultVal:"",clickCallback:null,width:260,textarea:!1},n),this.box=e,this.selValue=this.config.defaultVal,this.init(),this.handle()}return s(t,[{key:"init",value:function(){var t=this.config.width;this.box.css({width:t}),this.box.html(this.initRender()),this.selValue.length&&this.updateInpBox(this.box.find(".drop-ul"))}},{key:"loadData",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.box;this.config.data=t;var n=this.renderDrop().join(""),a=e.children(".combo-drop");a.html("<ul>"+n+"</ul>"),!this.updateInpBox(a.children()).length&&this.config.validCombo&&e.children(".combo-inp").addClass("no-fill")}},{key:"initRender",value:function(){return'\n\t\t\t\t<div class="combo-inp '+(this.config.validCombo?"no-fill":"")+'" >\n\t\t\t\t\t'+this.renderInpBox()+'\n\t\t\t\t</div>\n\t\t\t\t<div class="combo-drop ">\n\t\t\t\t\t<ul class="drop-ul">\n\t\t\t\t\t\t'+this.renderDrop().join("")+"\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t\t"}},{key:"setValue",value:function(t){var e=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.box).children(".combo-drop").children("ul");this.config.multiply?e.html(this.renderDrop(t)):e.children("li[echo-id="+t+"]").addClass("active").siblings().removeClass("active"),this.updateInpBox(e)}},{key:"getValue",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.box,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"id",n=t.find(".combo-value").val();if("id"==e)return n;var a=this.config,i=(a.data,a.idField);return a.textField,this.config.data.filter(function(t){return n.includes(t[i])})}},{key:"clearValue",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.box,e=t.find(".combo-value");this.selValue="",e.val(null),e.siblings(".combo-text").val(null),this.config.validCombo&&e.parent().addClass("no-fill"),t.find(".active").removeClass("active")}},{key:"updateInpBox",value:function(t){var e=t.parent().siblings(),n=e.children(".combo-text"),a=e.children(".combo-value"),i=this.config,s=i.data,o=i.idField,r=i.textField,l=(i.multiply,i.validCombo),c=[],u=$.map(t.children(".active"),function(t,e){var n=$(t).attr("echo-id"),a=c[e]=s.find(function(t){return t[o]==n});return c[e]=a&&a[r]||"",n});return this.selValue=u,n.val(c.join(",")),a.val(u.join(",")),l&&(u.join(",")?e.removeClass("no-fill"):e.addClass("no-fill")),this.selValue}},{key:"renderInpBox",value:function(){var t=this.config,e=t.textarea,n=t.multiply,a=t.prompt,i=t.slideIcon,s=this.selValue;return"\n\t\t\t\t\t"+((e||n)&&'<textarea  class="s-textarea combo-text" placeholder="'+a+'" readOnly="readOnly"></textarea>'||'<input type="text" class="s-inp combo-text" placeholder="'+a+'" readOnly="readOnly"/>')+'\n\t\t\t\t\t<input type="hidden" class="s-inp combo-value"  value="'+(Array.isArray(s)?s.join(","):s)+'"/>\n\t\t\t\t\t<span class="slide-icon '+i+'">\n\t\t\t\t\t</span>\n\t\t\t\t'}},{key:"renderDrop",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.selValue,e=this.config,n=e.data,a=e.dropIcon,i=e.textField,s=e.idField,o=e.dropFormatter;return n.map(function(e,n){var r=e[s];return'<li class="drop-item '+(t.includes(r)?"active":"")+'" echo-id="'+r+'">\n\t\t\t\t\t\t<span class="'+a+'"></span>\n\t\t\t\t\t\t<b class="item-txt">'+(o&&o(e)||e[i])+"</b>\n\t\t\t\t\t</li>"})}},{key:"handle",value:function(){var t=this;this.box.on("click",".drop-item",function(e){e.stopPropagation();var n=$(this),a=null,i=n.hasClass("active");if(t.config.multiply)i&&n.removeClass("active")||n.addClass("active"),a=!i;else{if(i)return;a=t.getValue(),n.addClass("active").siblings().removeClass("active")}var s=n.parent();if(t.updateInpBox(s),!t.config.multiply&&t.hideUp(t.box),t.config.clickCallback){var o=n.attr("echo-id"),r=t.config.data.find(function(e){return e[t.config.idField]==o});t.config.clickCallback(r,t,a)}}),this.box.on("click",".combo-inp",function(e){e.stopPropagation();var n=$(this).parent();n.hasClass("active")?t.hideUp(n):t.showDown(n)})}},{key:"showDown",value:function(t,e){t.children(".combo-drop").show(),requestAnimationFrame(function(){t.addClass("active")})}},{key:"hideUp",value:function(t){t.removeClass("active"),t.children(".combo-drop").hide()}}]),t}(),p=function(){function t(){r(this,t),this.handle()}return s(t,[{key:"init",value:function(){}},{key:"close",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"m-show";t.removeClass(e),requestAnimationFrame(function(){t.hide()})}},{key:"show",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"m-show";t.show(),requestAnimationFrame(function(){t.addClass(e)})}},{key:"handle",value:function(){var t=this;$(".m-close").click(function(e){var n=$(this).closest(".s-modal");t.close(n)});var e=null,n=null,a=null;$(".m-title").mousedown(function(t){(t.target||t.srcElement).classList.contains("m-title")&&(e="move",n=$(this).closest(".s-modal"),a={x:t.offsetX,y:t.offsetY})}),$(window).on("mousemove",function(t){if(t||window.events,e){var i=t.clientX-a.x,s=t.clientY-a.y;n[0].style.transform="translate("+i+"px,"+s+"px)",n[0].style.top=0,n[0].style.left=0}}),$(".m-title").on("mouseup",function(){a=n=e=null})}}]),t}(),v=function(){function t(e,n){r(this,t);var a={data:[],textField:"text",search:!0,idField:"id",childIcon:"fa fa-user-circle-o",parIcon:"fa fa-folder-open-o",slideIcon:"fa fa-minus-square-o",checkbox:!1,formatter:null,parClick:!1,clickCallback:function(){},checkCallback:function(){},clickAndCheck:!0,childrenField:"children",judgeRelation:function(t){return 0<t[a.childrenField].length}};this.config=Object.assign({},a,n),this.box=e,this.init(),this.handle()}var e,n;return s(t,[{key:"init",value:function(){var t=this.config,e=t.data,n=t.search,a=this.renderOrgJson(e,0),i=n?'<div class="tree-search">\n\t\t\t\t\t\t\t\t\t\t<label >\n\t\t\t\t\t\t\t\t\t\t\t<input type="text" class="s-inp" placeholder="搜索..." />\n\t\t\t\t\t\t\t\t\t\t\t<span class="search-close">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-times"></i> \n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t<button class="s-btn j-search"><i class="fa fa-search-plus"></i></button>\n\t\t\t\t\t\t\t\t\t</div>':"";this.box.html(i+'<ul class="s-tree">'+a.join("")+"</ul>")}},{key:"changeType",value:function(t,e){this.config.checkbox=t,this.box.unbind(),this.init(),this.handle()}},{key:"seachTree",value:function(t){var e=this.config,n=e.data,a=e.childrenField,i=e.textField,s=e.judgeRelation;return function e(n){return n.filter(function(n){var o=n[a],r=s(n);if(n[i],r){if(o.length){var l=e(o);return(n[a]=l).length}return!1}var c=n[i].includes(t);if(o.length){var u=e(o);return(n[a]=u).length||c}return c})}(JSON.parse(JSON.stringify(n)))}},{key:"renderOrgJson",value:function(t,e){var n=this,a=e;a++;var i=this.config,s=i.idField,o=i.textField,r=i.childrenField,l=i.judgeRelation,c=i.childIcon,u=i.parIcon,d=i.formatter;return t.map(function(t,e){var i=t[s],h=!d&&t[o]||d(t),f=t[r],p=t.par_id,v=l(t),m={id:i,name:h,lev:a,par_id:p};if(v){m.parIcon=u;var y=n.renderOrgJson(f,a);return n.parentComponent(y,m)}return m.childIcon=c,n.childComponent(m)})}},{key:"reload",value:(e=i.default.mark(function t(){var e,n,a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=e=this.config.data,a&&(e=this.seachTree(a)),n=this.renderOrgJson(e,0),this.box.find(".s-tree").html(n);case 4:case"end":return t.stop()}},t,this)}),n=function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function a(i,s){try{var o=t[i](s),r=o.value}catch(i){return void n(i)}if(!o.done)return Promise.resolve(r).then(function(t){a("next",t)},function(t){a("throw",t)});e(r)}("next")})},function(){return n.apply(this,arguments)})},{key:"parentComponent",value:function(t,e){var n=e.name,a=e.id,i=e.lev,s=(e.par_id,this.config),o=s.parIcon,r=s.checkbox,l=s.slideIcon;return'\n\t\t\t<li  lev="'+i+'" class="tree-li">\n\t\t\t\t<div class="menuItem par-item" echo-id="'+a+'">\n\t\t\t\t\t'+(new Array(i).fill('<span class="indent"></span>').join("")+(r&&'<span class="s-checkbox">\n\t\t\t\t\t\t<input type="checkbox" class="par-checkinp tree-inp" value="'+a+'"  /><label class="fa fa-square-o" ></label>\n\t\t\t\t</span>'||""))+'\n\t\t\t\t\t<i class="'+o+'"></i>\n\t\t\t\t\t<span class="item-txt">'+n+'</span><span class="tree-slide-icon"><i class="'+l+'"></i></span>\n\t\t\t\t</div>\n\t\t\t\t<ul class="par-menu">'+t.join("")+"</ul>\n\t\t\t</li>\n\t\t"}},{key:"childComponent",value:function(t){var e=t.name,n=t.id,a=t.lev,i=this.config,s=i.childIcon,o=i.checkbox&&'<span class="s-checkbox">\n\t\t\t\t\t\t<input type="checkbox" class="child-checkinp tree-inp" value="'+n+'"  /><label class="fa fa-square-o" ></label>\n\t\t\t\t</span>'||"";return'\n\t\t\t<li lev="'+a+'" class="tree-li">\n\t\t\t\t<div class="menuItem child-item" echo-id="'+n+'">\n\t\t\t\t'+(new Array(a).fill('<span class="indent"></span>').join("")+o)+'\n\t\t\t\t<i class="'+s+'">&nbsp;</i>\n\t\t\t\t<span class="item-txt">'+e+"</span>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t"}},{key:"handle",value:function(){var t=this.config,e=t.clickCallback,n=t.clickAndCheck,a=t.checkbox,i=t.checkCallback,s=t.parClick,o=this;this.box.on("click",".tree-slide-icon",function(t){t.stopPropagation();var e=$(this).closest(".tree-li"),n=$(this).parent();n.hasClass("tree-active")&&n.removeClass("tree-active")||n.addClass("tree-active"),e.children(".par-menu").slideToggle()}),this.box.on("click",function(t){t.stopPropagation()}),this.box.on("click",".child-item",function(t){var i=$(this),s=o.findNode(+i.attr("echo-id"));a&&n&&i.find(".tree-inp").click(),a||(i.closest(".s-tree").find(".active").removeClass("active"),i.addClass("active")),e(s,i)}),this.box.on("click",".search-close",function(){var t=$(this);t.siblings(".s-inp").val(null),t.hide(),o.reload()}),this.box.on("click",".j-search",function(){var t=$(this).siblings("label").children(".search-close");t.show();var e=t.siblings(".s-inp").val().trim();e&&o.reload(e)}),this.box.on("click",".par-item",function(){var t=$(this),i=o.findNode(+t.attr("echo-id"));a&&n&&t.find(".tree-inp").click(),a&&e(i,t),!a&&s&&(e(i,t),t.closest(".s-tree").find(".active").removeClass("active"),t.addClass("active"))}),this.box.on("click",".tree-inp",function(t){t.stopPropagation();var e=$(this),n=e.prop("checked"),a=e.hasClass("par-checkinp"),s=e.closest(".tree-li");a&&(s.find(".has-chec").removeClass("has-chec"),s.find(".tree-inp").prop("checked",n));var r=s.attr("lev");if("1"!==r)for(var l=e.closest(".tree-li");1<r;){r=+(l=l.parent().parent()).attr("lev");var c=l.children(".menuItem").find(".tree-inp"),u=l.children(".par-menu"),d=u.children().length,h=u.children().children(".menuItem").find(".tree-inp:checked").length;0===h?(c.siblings("label").removeClass("has-chec"),c.prop("checked",!1)):h<d?(c.prop("checked",!1),c.siblings("label").addClass("has-chec")):(c.siblings("label").removeClass("has-chec"),c.prop("checked",!1),c.prop("checked",!0),c.siblings("label").removeClass("has-chec"));var f=l.find(".has-chec").length;0==h&&f&&(c.prop("checked",!1),c.siblings("label").addClass("has-chec"))}var p=o.findNode(+e.val());i(p,e)})}},{key:"setValue",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.box;this.config.checkbox?(e.find(".tree-inp").prop("checked",!1).removeClass("has-chec"),t.map(function(t){e.find(".child-checkinp[value="+t+"]").click()})):this.setSingleValue(t)}},{key:"setSingleValue",value:function(t){(1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.box).find(".menuItem[echo-id="+t+"]").click()}},{key:"getValue",value:function(t){var e=this;if(1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.box,this.config.checkbox)return $.map(this.box.find(".child-checkinp:checked"),function(n){var a=n.value;return"id"===t&&a||e.findNode(a)});var n=this.box.find(".active").attr("echo-id");return["id"===t&&n||this.findNode(n)]}},{key:"findNode",value:function(t){var e=null,n=this.config,a=n.childrenField,i=n.idField;return function n(s){return s.find(function(s){var o=s[i]==t;return o&&(e=s),s[a].length&&!o&&n(s[a])||o})}(n.data),e}}]),t}(),m=function(){function t(e,n){r(this,t),this.config=Object.assign({},{prompt:"请选择...",slideIcon:"fa fa-chevron-down",defaultVal:"",validCombo:!0,width:300,textarea:!1},n),this.box=e,this.init()}return s(t,[{key:"init",value:function(){var t=this.config.width;this.box.css({width:t}),this.box.html(this.initRender()),this.renderDrop(),this.handle()}},{key:"initRender",value:function(){var t=!!this.config.treeConfig.checkbox;return'\n\t\t\t\t<div class="combo-inp '+(this.config.validCombo?"no-fill":"")+'">\n\t\t\t\t\t'+this.renderInpBox(t)+'\n\t\t\t\t</div>\n\t\t\t\t<div class="combo-drop ">\n\t\t\t\t\t<ul class="s-tree"></ul>\n\t\t\t\t</div>\n\t\t\t\t'}},{key:"setValue",value:function(t){1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.box,this.tree.setValue(t)}},{key:"getValue",value:function(){return this.tree.getValue("all")}},{key:"clearValue",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.box,e=t.find(".combo-value");e.val(null),e.siblings(".combo-text").val(null),this.config.validCombo&&e.parent().addClass("no-fill"),this.config.treeConfig.checkbox&&t.find(".tree-inp").prop("checked",!1).removeClass("has-chec")||t.find(".active").removeClass("active")}},{key:"updateInpBox",value:function(t,e){var n=this.tree.config.checkbox,a=t.siblings(),i=a.children(".combo-text"),s=a.children(".combo-value"),o=[],r=[];if(n)o=$.map(t.find(".child-checkinp:checked"),function(t,e){var n=$(t);return r[e]=n.val(),n.parent().siblings(".item-txt").text()});else{var l=e.id,c=e.txt;o[0]=c,r[0]=l}i.val(o.join(",")),s.val(r.join(",")),this.config.validCombo&&(r.join(",")?a.removeClass("no-fill"):a.addClass("no-fill"))}},{key:"renderDrop",value:function(){var t=this,e=this.box.children(".combo-drop"),n=this.config.treeConfig,a=n.clickCallback,i=n.checkCallback,s=Object.assign({},this.config.treeConfig,{clickCallback:function(e,n){var i=e[t.tree.config.idField],s=e[t.tree.config.textField],o=n.closest(".combo-drop");t.updateInpBox(o,{id:i,txt:s}),!t.tree.config.checkbox&&t.hideUp(t.box),a&&a(e)},checkCallback:function(e,n){var a=n.closest(".combo-drop");t.updateInpBox(a),i&&i(e)}});this.tree=new v(e,s)}},{key:"changeType",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.box;this.tree.changeType(t),n.find(".combo-inp").html(this.renderInpBox(t)),this.config.validCombo&&n.children(".combo-inp").addClass("no-fill"),e&&this.setValue(e)}},{key:"renderInpBox",value:function(t){var e=this.config,n=e.prompt,a=e.slideIcon;return"\n\t\t\t\t\t"+((e.textarea||t)&&'<textarea type="text" class="s-textarea combo-text" placeholder="'+n+'" readOnly="readOnly"/></textarea>'||'<input type="text" class="s-inp combo-text" placeholder="'+n+'" readOnly="readOnly"/>')+'\n\t\t\t\t\t<input type="hidden" class="s-inp combo-value"  value=""/>\n\t\t\t\t\t<span class="slide-icon '+a+'">\n\t\t\t\t\t</span>\n\t\t\t\t'}},{key:"handle",value:function(){var t=this;this.box.on("click",".combo-inp",function(e){e.stopPropagation();var n=$(this).parent();n.hasClass("active")?t.hideUp(n):t.showDown(n)})}},{key:"showDown",value:function(t){t.children(".combo-drop").show(),requestAnimationFrame(function(){t.addClass("active")})}},{key:"hideUp",value:function(t){t.removeClass("active"),t.children(".combo-drop").hide()}}]),t}();e.Unit=l,e.SCombobox=f,e.SModal=p,e.Calendar=o.Calendar,e.Tree=v,e.SComboTree=m,e.SInp=h,e.DropMenu=d,e.RippleBtn=u,e.Search=c},function(t,e){},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Calendar=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}();function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n(4);var s=function(){function t(e,n){i(this,t);var a=n.selTime,s=n.CurTime,o=n.updateShowSel,r=n.time,l=n.timeWatch,c=n.rotate;this.updateShowSel=o,this.time=r,this.rotate=c,this.CurTime=s,this.showTime=Object.assign({},a),this.selTime=a,this.viewBox=e,this.index=this.viewBox.index(),this.searsonFormatter=["一季度","二季度","三季度","四季度"],this.monFormatter=["一","二","三","四","五","六","七","八","九","十","十一","十二"],this.timeWatch=l,this.init(),this.handle()}return a(t,[{key:"init",value:function(){var t='<div class="s-calendar-time">'+this.renderTimeShow()+"</div>"+this.renderView();this.viewBox.html(t),this.calendarItems=this.viewBox.find(".calendar-item"),this.timeBox=this.viewBox.find(".s-calendar-time")}},{key:"getMonDays",value:function(t,e){return new Date(t,e,0).getDate()}},{key:"dayToWeek",value:function(t,e,n){return new Date(t,e-1,n).getDay()}},{key:"renderView",value:function(){var t=this.renderDays().join(""),e=this.renderMon().join(""),n=this.renderSeason().join(""),a=this.renderYear(this.showTime.year).join(""),i=new Array(4).fill(""),s=this.time?"has-watchTime":"";return i[this.rotate-1]="calendar-active",'\n\t\t\t\t\t<ul class="s-calendar-content">\n\t\t\t\t\t\t<li class="calendar-item '+i[0]+'">\n\t\t\t\t\t\t\t'+a+'\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class="calendar-item '+i[1]+'">\n\t\t\t\t\t\t\t'+n+'\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class="calendar-item '+i[2]+'">\n\t\t\t\t\t\t\t'+e+'\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class="calendar-item '+i[3]+" "+s+'" >\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t'+t+"\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t   "}},{key:"renderTimeShow",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.rotate,e=this.showTime,n=e.year,a=e.mon,i=(e.searson,'\n\t\t\t\t\t\t\t<div class="calendar-control">\n\t\t\t\t\t\t\t\t<button class="s-btn day-btn" sign="'+t+'"><i class="fa fa-backward"></i></button>\n\t\t\t\t\t\t\t\t<button class="s-btn day-btn" sign="'+t+'"><i class="fa fa-forward"></i></button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t'),s="";switch(this.rotate){case 1:s="";break;case 2:case 3:s='<i class="fa fa-calendar">&nbsp;</i><span class="timeType" sign="1">'+n+"年</span>";break;case 4:s='<i class="fa fa-calendar">&nbsp;</i><span class="timeType" sign="1">'+n+'年</span><span>/</span><span class="timeType" sign="3">'+a+"月</span>"}return' <div class="time-box">\n\t\t\t\t\t\t\t\t\t'+s+"\n\t\t\t\t\t</div>\n\t\t\t\t\t"+((4===t||1===t)&&i||"")+" "}},{key:"renderDays",value:function(){var t=this,e=this.showTime,n=e.year,a=e.mon,i=this.getMonDays(n,a),s=this.dayToWeek(n,a,1),o=Math.ceil((i+s)/7),r="",l=new Array(o).fill("1").map(function(e,l){switch(l){case 0:var c=t.getMonDays(n,a-1),u=new Array(s).fill("1").map(function(e,n){var a=c-s+n+1;return t.dayComponent(a,"disabled")}),d=new Array(7-s).fill("1").map(function(e,n){var a=n+1;return t.dayComponent(a)});return'<ul class="data-group">'+u.concat(d).join("")+"</ul>";case o-1:r=7*l+1-s;var h=(i+s)%7||7,f=new Array(h).fill("1").map(function(e,n){var a=n+r;return t.dayComponent(a)}),p=new Array(7-h).fill("1").map(function(e,n){var a=n+1;return t.dayComponent(a,"disabled")});return'<ul class="data-group">'+f.concat(p).join("")+"</ul>";default:return r=7*l+1-s,'<ul class="data-group">'+new Array(7).fill("1").map(function(e,n){var a=n+r;return t.dayComponent(a)}).join("")+"</ul>"}});return this.time&&l.push(this.renderTimeBox()),['<ul class="week-group">\n\t\t\t\t\t\t\t<li>日</li><li>一</li><li>二</li><li>三</li><li>四</li><li>五</li><li>六</li>\n\t\t\t\t\t\t </ul>'].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(l))}},{key:"renderMon",value:function(){var t=this,e=this.showTime,n=e.year,a=(e.mon,this.CurTime.year===n),i=this.selTime.year===n;return new Array(4).fill("1").map(function(e,n){return'\t\n\t\t\t\t\t\t\t<ul class="mon-group">\n\t\t\t\t\t\t\t\t'+new Array(3).fill("1").map(function(e,s){var o=3*n+s+1;return'\n\t\t\t\t\t\t\t<li echo-text="'+o+'" class=" view-item '+(a&&t.CurTime.mon===o?"calendar-today":"")+" "+(i&&t.selTime.mon===o?"calendar-sel":"")+'" >\n\t\t\t\t\t\t\t\t<span class="mon-span">'+t.monFormatter[o-1]+"月</span>\n\t\t\t\t\t\t\t</li>\n\n\t\t\t\t\t\t\t"}).join("")+"\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t"})}},{key:"renderSeason",value:function(){var t=this,e=this.showTime,n=e.year,a=(e.searson,this.CurTime.year===n),i=this.selTime.year===n;return new Array(2).fill("1").map(function(e,n){var s=2*n+1,o=a&&s===t.CurTime.searson?"calendar-today":"",r=i&&t.selTime.searson===s?"calendar-sel":"",l=a&&s+1===t.CurTime.searson?"calendar-today":"",c=i&&t.selTime.searson===s+1?"calendar-sel":"";return'\n\t\t\t\t\t<ul class="searson-group">\n\t\t\t\t\t\t<li echo-text="'+s+'" class=" view-item '+o+" "+r+'">\n\t\t\t\t\t\t\t<span class="sea-span">'+t.searsonFormatter[s-1]+'</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li echo-text="'+(s+1)+'" class=" view-item '+l+" "+c+'" >\n\t\t\t\t\t\t\t<span class="sea-span">'+t.searsonFormatter[s]+"</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t"})}},{key:"renderYear",value:function(t){var e=this,n=t%10,a=t-(n=0===n?10:n)+1;this.lastYear=a+9;var i=new Array(9).fill("1").map(function(t,n){var i=a+n;return'\n\t\t\t\t\t<li echo-text="'+i+'" class=" view-item  '+(e.CurTime.year===i?"calendar-today":"")+" "+(e.selTime.year===i?"calendar-sel":"")+'">\n\t\t\t\t\t\t<span class="year-span">'+i+"</span>\n\t\t\t\t\t</li>\n\n\t\t\t\t\t"}),s=this.CurTime.year===this.lastYear?"calendar-today":"",o=this.selTime.year===this.lastYear?"calendar-sel":"",r='\n\t\t\t\t\t\t<div echo-text="'+this.lastYear+'" class="last-year view-item  '+s+" "+o+'">\n\t\t\t\t\t\t\t<span class="year-span">'+this.lastYear+"</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t ",l=new Array(3).fill("1").map(function(t,e){return'\n\t\t\t\t\t\t<ul class="year-group">\n\t\t\t\t\t\t\t'+i.splice(0,3).join("")+"\n\t\t\t\t\t\t</ul>\n\n\t\t\t\t\t"});return l.push(r),l}},{key:"dayComponent",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"abled",n=this.showTime,a=n.year,i=n.mon,s=this.selTime,o=s.year,r=s.mon,l=(s.searson,s.day);return'\n\t\t\t\t\t\t<li class="'+("abled"===e?" view-item ":"day-disabled")+" "+("abled"===e&&a===this.CurTime.year&&i===this.CurTime.mon&&this.CurTime.day===t?"calendar-today":"")+" "+("abled"===e&&a===o&&i===r&&t===l?"calendar-sel":"")+'"  echo-text="'+t+'">\n\t\t\t\t\t\t\t<span class="day-span">'+t+"</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t"}},{key:"updateDays",value:function(t){var e=this.showTime,n=e.year,a=e.mon,i=void 0,s=void 0;switch(t){case 0:i=a-1==0?12:a-1,s=a-1==0?n-1:n;break;case 1:i=a+1==13?1:a+1,s=a+1==13?n+1:n}this.showTime.mon=i,this.showTime.searson=Math.ceil(i/3),this.showTime.year=s;var o=this.renderDays().join("");this.timeBox.html(this.renderTimeShow()),this.calendarItems.eq(3).html(o)}},{key:"updateYears",value:function(t){var e=0===t?this.lastYear-10:this.lastYear+1,n=this.renderYear(e).join("");this.calendarItems.eq(0).html(n)}},{key:"updateCalendar",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.rotate;this.timeBox.html(this.renderTimeShow(t));var e=this.showTime.year,n=t-1,a="";switch(t){case 1:a=this.renderYear(e).join("");break;case 2:a=this.renderSeason().join("");break;case 3:a=this.renderMon().join("");break;case 4:a=this.renderDays().join("")}this.calendarItems.eq(n).html(a),this.calendarItems.eq(n).addClass("calendar-active").siblings().removeClass("calendar-active")}},{key:"updateSel",value:function(t){t.closest(".calendar-item").find(".calendar-sel").removeClass("calendar-sel"),t.addClass("calendar-sel")}},{key:"renderTimeBox",value:function(){var t=this.timeWatch;return'<div class="m-time">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<b>时间：&nbsp;</b>\n\t\t\t\t\t\t<input type="number" class="wacth-time" max="24" min="0" value="'+t[0]+'" echo-index="0" />\t\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<b>&nbsp;&nbsp;:&nbsp;</b>\n\t\t\t\t\t\t<input type="number" class="wacth-time" max="60" echo-index="1" min="0" value="'+t[1]+'" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>'}},{key:"handle",value:function(){var t=this;this.viewBox.on("click",".day-btn",function(){var e=$(this).index();4==+$(this).attr("sign")?t.updateDays(e):t.updateYears(e)}),this.viewBox.on("blur",".wacth-time",function(){var e=$(this),n=+e.attr("echo-index");t.timeWatch[n]=e.val().padStart(2,"0"),t.updateShowSel()}),this.viewBox.on("click",".view-item",function(){var e=+$(this).attr("echo-text"),n=t.rotate,a=Array.from(t.calendarItems).findIndex(function(t){return t.classList.value.includes("calendar-active")});t.showTime[["year","searson","mon","day"][a]]=e;var i=t.showTime,s=i.year,o=i.searson,r=i.mon,l=i.day;t.selTime.year=s,t.selTime.searson=o,t.selTime.mon=r,t.selTime.day=l,t.updateShowSel(),n===a+1&&t.updateSel($(this))||t.updateCalendar()}),this.viewBox.on("click",".timeType",function(){var e=+$(this).attr("sign");t.updateCalendar(e)})}}]),t}(),o=function(){function t(e,n,a){i(this,t);var s=Object.assign({},{rotate:3,style:1,time:!1},a),o=s.rotate,r=s.style,l=s.time;this.rotate=o,this.style=r,this.time=l,this.CurTime=this.getCurTime(),this.selTime=this.initSelTime(),this.typeChange=[{rotate:"年"},{rotate:"季"},{rotate:"月"},{rotate:"日"}],this.timeWatchArr=[[10,30],[12,50]],this.container=e,this.inp=n,this.value="",this.init(),this.Handle()}return a(t,[{key:"changeStyle",value:function(t,e){this.style=t,this.selTime=this.initSelTime(),this.showSelBox.html(this.renderTimeStr().join("")),this.initViewsContent(),e&&this.setTime(e)}},{key:"init",value:function(){var t=this.initHead()+' <div class="calendar-container"> </div> ';this.container.html(t),this.calendarViewBox=this.container.children(".calendar-container"),this.showSelBox=this.container.find(".showSel-box"),this.frequemcy=this.container.find(".calendar-frequemcy"),this.rotateShow=this.container.find(".calendar-rotate"),this.initViewsContent()}},{key:"getCurTime",value:function(){var t=new Date,e=t.getFullYear(),n=t.getMonth()+1;return{year:e,mon:n,day:t.getDate(),searson:Math.ceil(n/3)}}},{key:"initHead",value:function(){var t=this,e=this.CurTime,n=(e.year,e.mon,e.searson,e.day,this.typeChange),a=n.map(function(e,n){var a=e.rotate;return'\n\t\t\t\t\t\t<li class="frequemcy-item '+(n===t.rotate-1?"frequemcy-active":"")+'">\n\t\t\t\t\t\t\t<span class="fa fa-calendar-plus-o">&nbsp;'+a+"</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t"});return'\n\t\t\t\t<div class="s-calendar-title">\n\t\t\t\t\t<div class="frequemcy-box">\n\t\t\t\t\t\t<button class="frequemcy-sel s-btn">\n\t\t\t\t\t\t\t<span class="fa fa-calendar-check-o"></span>\n\t\t\t\t\t\t\t<b class="calendar-rotate">'+n[this.rotate-1].rotate+'</b>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<ul class="calendar-frequemcy">\n\t\t\t\t\t\t\t'+a.join("")+' \n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="showSel-box">\n\t\t\t\t\t\t'+this.renderTimeStr().join("")+'\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<button class="s-btn calendar-opt sure-btn">确定</button>\n\t\t\t\t\t\t<button class="s-btn calendar-opt cancel-btn">取消</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t'}},{key:"initViewsContent",value:function(){var t=this,e=new Array(this.style).fill("").map(function(t){return'<div class="calendar-view"></div>'});this.calendarViewBox.html(e.join(""));var n=Array.from(this.calendarViewBox.children(".calendar-view")),a=(this.CurTime,this.CurTime),i=this.time,o=(this.timeWatchArr,{CurTime:a,rotate:this.rotate,time:i,updateShowSel:function(){t.updateShowSel()}});this.view_2&&(this.view_2.viewBox.unbind(),this.view_2=null),a.year,a.mon,a.searson,a.day,n.map(function(e,n){o.selTime=t.selTime[n],o.timeWatch=t.timeWatchArr[n],t["view_"+n]=new s($(e),o)}),this.upInp()}},{key:"renderTimeStr",value:function(){var t=this,e=" - ",n=[],a=new Array(this.style).fill("").map(function(a,i){var s=t.selTime[i],o=s.year,r=s.searson,l=s.mon,c=s.day,u=t.timeWatchArr[i];l=(l+"").padStart(2,"0"),c=(c+"").padStart(2,"0");var d="";switch(t.rotate){case 1:d="",n[i]=[o];break;case 2:d=""+(e+r),n[i]=[o,"S"+r];break;case 3:d=""+(e+l),n[i]=[o,l];break;case 4:d=""+(e+l)+(e+c),n[i]=[o,l,c]}return"\n\t\t\t\t\t\t"+(1===i?"<span >&nbsp;-&nbsp;&nbsp;</span>":"")+'<span class="sel-time-inp">'+(o+d+(t.time&&4===t.rotate&&"&nbsp;&nbsp;"+u.join(" : ")||""))+"</span>\n\n\t\t\t\t\t\t"});return this.value=n,a}},{key:"initSelTime",value:function(){var t=this.CurTime,e=t.year,n=t.mon,a=t.searson,i=t.day,s=this.rotate;return new Array(this.style).fill("").map(function(t,o){switch(s){case 4:return{year:e,searson:a,mon:n+o,day:i+o};case 2:return{year:e,searson:a+o,mon:n,day:i};case 3:return{year:e,searson:a,mon:n+o,day:i};case 1:return{year:e+o,searson:a,mon:n,day:i}}})}},{key:"updateShowSel",value:function(t){var e=this,n=new Array(this.style).fill("").map(function(t,n){return e["view_"+n].selTime});this.selTime=n,this.showSelBox.html(this.renderTimeStr().join(""))}},{key:"updateRotate",value:function(){var t=this.rotate-1;this.rotateShow.html(this.typeChange[t].rotate),this.frequemcy.children().eq(t).addClass("frequemcy-active").siblings().removeClass("frequemcy-active")}},{key:"upInp",value:function(){var t=this,e=this.value.map(function(e,n){var a=t.time&&4===t.rotate&&"  "+t.timeWatchArr[n].join(" : ")||"";return e.join(" - ")+a});this.inp.val(e.join(" 至 "))}},{key:"setTime",value:function(t){var e=this;if(Array.isArray(t)){var n=t[0]+"";4===n.length?(this.rotate=1,new Array(this.style).fill("").map(function(n,a){e.selTime[a].year=+t[a].substr(0,4);var i=e["view_"+a];i.rotate=e.rotate,i.showTime=Object.assign({},e.selTime[a]),i.updateCalendar()})):n.includes("S")?(this.rotate=2,new Array(this.style).fill("").map(function(n,a){e.selTime[a].year=+t[a].substr(0,4),e.selTime[a].searson=+t[a].substr(5,1);var i=e["view_"+a];i.rotate=e.rotate,i.showTime=Object.assign({},e.selTime[a]),i.updateCalendar()})):6===n.length?(this.rotate=3,new Array(this.style).fill("").map(function(n,a){e.selTime[a].year=+t[a].substr(0,4),e.selTime[a].mon=parseInt(t[a].substr(4,2));var i=e["view_"+a];i.rotate=e.rotate,i.showTime=Object.assign({},e.selTime[a]),i.updateCalendar()})):(this.rotate=4,new Array(this.style).fill("").map(function(n,a){e.selTime[a].year=+t[a].substr(0,4),e.selTime[a].mon=parseInt(t[a].substr(4,2)),e.selTime[a].day=parseInt(t[a].substr(6,2));var i=e["view_"+a];i.rotate=e.rotate,i.showTime=Object.assign({},e.selTime[a]),e.time&&(e.timeWatchArr[a]=t[a].split("@")[1].split(":"),i.timeWatch=e.timeWatchArr[a]),i.updateCalendar()})),this.updateShowSel(),this.upInp(),this.updateRotate()}}},{key:"Handle",value:function(){var t=this;this.container.on("click",".frequemcy-item",function(){var e=$(this).index();t.frequemcy.slideToggle("fast",function(){t.rotate=e+1,t.updateRotate(),t.updateShowSel(),new Array(t.style).fill("").map(function(e,n){var a=t["view_"+n];a.rotate=t.rotate,a.updateCalendar()})})}),this.container.on("click",function(t){t.stopPropagation()}),this.inp.click(function(e){e.stopPropagation(),t.container.is(":visible")?t.container.hide():t.container.show()}),this.container.on("click",".frequemcy-sel",function(){t.frequemcy.slideToggle()}),this.container.on("click",".calendar-opt",function(){if(0===$(this).index()){if(2===t.style){var e=t.value[0].join("/");e=2===t.rotate&&e.replace("S","")||e,e=new Date(e).getTime();var n=t.value[1].join("/");if(n=2===t.rotate&&n.replace("S","")||n,(n=new Date(n).getTime())<e)return void alert("傻逼吧！")}t.upInp()}t.container.hide()})}}]),t}();e.Calendar=o},function(t,e){},function(t,e){},function(t,e){},,function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EasyUITab=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}();n(10);var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return a(t,[{key:"creatTab",value:function(t,e,n,a){var i=this,s={data:t,idField:n.idField,singleSelect:!0,fitColumns:!0,nowrap:!1,selectOnCheck:!0,frozenColumns:n.frozenColumns,columns:n.columns,onLoadSuccess:function(){var t=e.parent().find(".checkAll");t.attr("checkedStatus","off"),a&&a(),t.unbind(),t.on("click",function(t){i.checkAll(t,n.tabId)})}};n.onAfterEdit&&(s.onAfterEdit=n.onAfterEdit),e.datagrid(s)}},{key:"checkAll",value:function(t,e){var n=$(t.target),a=n.attr("checkedStatus"),i="off"===a;$(e+" .checkSingle").prop("checked",i),n.attr("checkedStatus","off"===a?"on":"off")}},{key:"checkSingleHandle",value:function(t){var e=t.find(".checkAll"),n=t.find(".checkSingle").not(":checked").length?"off":"on";e.attr("checkedStatus",n)}},{key:"setPageHeight",value:function(t,e){var n=$(window).height();t.css("height",n-e)}},{key:"frozenColumns",value:function(t,e){var n=Object.assign({},{disableCheck:null,order:!1,checkbox:!0},e),a=n.disableCheck,i=n.order,s=[];if(n.checkbox){var o={field:"custom_checkbox",title:'<div class="tab-checkbox"><span  name="tab_node" checkedStatus="off"  class="tab_node checkAll fa fa-square-o fa-lg"></span></div>',align:"center",width:40,formatter:function(e,n,i){var s=a&&a(n)?"dis-check":"checkSingle",o="dis-check"===s?"禁止选择":"";return'<div class="tab-checkbox">\n\t\t\t\t\t\t\t\t\t\t\t\t<input type="checkbox"\n\t\t\t\t\t\t\t\t\t\t\t\t       name="tab_node" \n\t\t\t\t\t\t\t\t\t\t\t\t       '+("dis-check"===s?"disabled":"")+' \n\t\t\t\t\t\t\t\t\t\t\t\t       class="tab_node '+s+'" \n\t\t\t\t\t\t\t\t\t\t\t\t       value="'+("无"==t?index:n[t])+'" \n\t\t\t\t\t\t\t\t\t\t\t\t       title="'+o+'" />\n\t\t\t\t\t\t\t\t\t\t\t\t<label for="tab_node" class="fa fa-square-o fa-lg"></label></div>'}};s.push(o)}return i&&s.push({field:"custom_order",title:"序号",align:"center",width:48,formatter:function(t,e,n){return n+1}}),[s]}}]),t}();e.EasyUITab=i},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}();n(0);var i=window.jsp_config.baseUrl+"layout/",s=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return a(t,[{key:"getAllLayout",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return Promise.resolve($.get(i+"getAllLayout",{keyword:t}))}},{key:"addView",value:function(t,e){var n="view"===t?"addLayout":"addLayout_par";return Promise.resolve($.post(i+n,e))}},{key:"checkName",value:function(t){return Promise.resolve($.post(i+"checkName",t))}},{key:"updataRecycle",value:function(t){return Promise.resolve($.post(i+"updataRecycle",t))}},{key:"getAllLayout_icon",value:function(){return Promise.resolve($.get(i+"getAllLayout_icon"))}},{key:"updataIcon",value:function(t){return Promise.resolve($.post(i+"updataIcon",t))}},{key:"updataName",value:function(t){return Promise.resolve($.post(i+"updataName",t))}},{key:"getLayoutUserTree",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return Promise.resolve($.get(i+"getLayoutUserTree",{keyword:t}))}},{key:"ReleaseLayout",value:function(t){return Promise.resolve($.ajax({method:"post",url:i+"ReleaseLayout",contentType:"application/json",data:JSON.stringify(t)}))}},{key:"showReleaseLayout",value:function(t){return Promise.resolve($.post(i+"showReleaseLayout",{layout_id:t}))}},{key:"copyLayout",value:function(t,e){return Promise.resolve($.post(i+"copyLayout",{layoutId:t,layoutName:e}))}}]),t}());e.api=s},function(t,e){},function(t,e){},function(t,e){},function(t,e,n){"use strict";var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}();n(45),n(44),n(43);var s=n(11),o=n(2),r=n(42);function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c=window.jsp_config,u=c.user_id,d=(c.catalogSrc,new o.Unit),h=$("#tab"),f=$("#section"),p=$("#tabBox"),v=$(".style-view"),m=$("#catalogueBox"),y=$("#iconBox"),b=$("#tabCard"),g=($("#menuBox"),$("#addMBtn")),k=$("#confirmBtn"),w=($("#issueBtn"),$("#statusBox")),x=$("#tipText"),C=$("#confirm-MView"),T=$("#issue-MView"),_=$("#orgTree"),S=$("#add-MView"),j=$("#name"),I=$("#parName"),A=function(t){function e(){l(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.setPageHeight(f,150),t.handle(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.EasyUITab),i(e,[{key:"tabConfig",value:function(t){return{idField:t,tabId:"#tabBox",frozenColumns:this.frozenColumns(t,{disableCheck:function(t){return!(1!==t.layout_type||!t.sub.length)}}),columns:[[{field:"layout_name",title:"视图名称",width:"24%",formatter:function(t,e,n){var a=e.layout_icon_name;return e.layout_type,'<div class="tab-node '+["","node-catalogue","node-file"][+e.layout_type]+'" echo-data="'+n+'"><i class="sicon '+a+'">&nbsp;</i><span>'+t+"</span></div>"}},{field:"layout_type",title:"类型",width:"10%",formatter:function(t,e,n){return'<span class="'+(2===t?"tab-type":null)+'">'+(1===t?"分类":"视图")+"</span>"}},{field:"create_user_name",title:"创建人",width:"14%"},{field:"updata_time",title:"更新时间",width:"18%"},{field:"optBtn",title:"操作",align:"center",width:"30%",formatter:function(t,e,n){var a="";switch(e.layout_type){case 1:a='\n\t\t\t\t\t\t\t\t\t\t<div class="tab-opt s-btn s-Naira" node-sign="icon">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class="sicon sicon-btn-3"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>图标</span>\t\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="tab-opt s-btn s-Naira" node-sign="rename">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class="sicon sicon-btn-4"></i>\t\n\t\t\t\t\t\t\t\t\t\t\t\t<span>重命名</span>\t\n\t\t\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t   \t\t';break;case 2:a='\n\t\t\t\t\t\t\t\t \t\t<div class="tab-opt s-btn s-Naira" node-sign="icon">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class="sicon sicon-btn-3"></i>\t\n\t\t\t\t\t\t\t\t\t\t\t\t<span>图标</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="tab-opt s-btn s-Naira" node-sign="rename">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class="sicon sicon-btn-4"></i>\t\n\t\t\t\t\t\t\t\t\t\t\t\t<span>重命名</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="tab-opt s-btn s-Naira" node-sign="pre">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-eye"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>预览</span>\t\t\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="tab-opt s-btn s-Naira" node-sign="issue">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-paper-plane-o"></i>\t\n\t\t\t\t\t\t\t\t\t\t\t\t<span>发布</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="tab-opt s-btn s-Naira" node-sign="copy">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class="sicon sicon-btn-1"></i>\t\n\t\t\t\t\t\t\t\t\t\t\t\t<span>复制</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t   \t\t'}return'\n\t\t\t\t\t\t\t\t<div class="tabBtnBox" echo-data=\''+n+"' >\n\t\t\t\t\t\t\t\t\t\t"+a+"\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t"}}]]}}},{key:"loadTab",value:function(t){this.creatTab(t,h,this.tabConfig("layout_id"))}},{key:"changeTabcard",value:function(t){var e=h.datagrid("getData").rows,n=+t.attr("echo-data"),a=e[n].sub;this.loadTab(a);var i=e[n],s=i.layout_name,o=i.layout_id,r=b.data("menuArr");r.push({layout_name:s,index:n,layout_id:o}),P.tabCardInit(r)}},{key:"handle",value:function(){var t=this;p.on("click",".node-catalogue",function(){var e=$(this);t.changeTabcard(e)}),p.on("click",".node-file",function(){P.toEdit($(this),0)}),p.on("click",".checkSingle",function(){t.checkSingleHandle(p)})}}]),e}(),B=function(){function t(){l(this,t),this.handle()}return i(t,[{key:"catalogueInit",value:function(t){var e=t.map(function(t,e){var n=t.layout_icon_name,a=t.layout_name,i=(t.layout_id,1===t.layout_type?"view-catalogue":"view-file"),s=0===t.sub.length;return'\n\t\t\t\t\t<div class="catalogue-item " >\n\t\t\t\t\t\t<div class="view-show '+i+'" echo-data="'+e+'">\n\t\t\t\t\t\t\t<p><i class="sicon '+n+'"></i></p>\n\t\t\t\t\t\t\t<p class="catalogue-name"><span>'+a+'</span></p>\n\t\t\t\t\t\t\t<span class="s-checkbox catalogue-chec '+(s?"":"dis-check")+'">\n\t\t\t\t\t\t\t\t\t'+(s?'<input type="checkbox"  class="catalogue-chec-inp" >':"")+'\n\t\t\t\t\t\t\t\t\t<label class="fa fa-square-o"></label>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t  '});m.html(e),m.data("getData",t),this.cataFooterInit()}},{key:"cataFooterInit",value:function(){m.siblings(".cata-footer").html(' \n\t\t\t\t<div class="footer-item">\n\t\t\t\t\t<i class="fa fa-bookmark-o">&nbsp;</i>\n\t\t\t\t\t<span>点击获取文件信息</span>\n\t\t\t\t\t<br>\n\t\t\t\t\t<i class="fa fa-bookmark-o">&nbsp;</i>\n\t\t\t\t\t<span>双击进入目录</span>\n\t\t\t\t</div>\n\t\t\t\t')}},{key:"cataFooterRender",value:function(t){var e=t.layout_type,n=t.create_user_name,a=t.layout_name,i=t.updata_time,s='\n\t\t\t\t\t<div class="cata-info footer-item">\n\t\t\t\t\t\t<span class="sicon '+t.layout_icon_name.trim()+'"></span>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t   <span><b>文件名：</b>'+a+"</span><br><span><b>包含对象：</b>"+t.sub.length+'个</span>\n\t\t\t\t\t\t  </span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="footer-item" style="width:25%">\n\t\t\t\t\t\t<b>创建时间：</b>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<span style="padding-left:5em">'+i+'</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="footer-item" style="width:15%">\n\t\t\t\t\t\t<b>创建人：</b>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<span style="padding-left:4em">'+n+'</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="footer-item" style="width:15%">\n\t\t\t\t\t\t<b>文件类型：</b>\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<span style="padding-left:5em">'+(1===e?"分类文件夹":"视图文件")+"</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t";m.siblings(".cata-footer").html(s)}},{key:"handle",value:function(){var t=this;m.on("dblclick",".view-catalogue",function(){window.clearTimeout(e);var n=$(this),a=m.data("getData"),i=+n.attr("echo-data"),s=a[i].sub;t.catalogueInit(s);var o=a[i],r=o.layout_name,l=o.layout_id,c=b.data("menuArr");c.push({layout_name:r,index:i,layout_id:l}),P.tabCardInit(c),$("#catalogueChecAll").children("input").prop("checked",!1)}),m.on("dblclick",".view-file",function(){P.toEdit($(this),1)});var e=null;v.eq(1).on("click",".view-show",function(){var n=$(this);clearTimeout(e),e=setTimeout(function(){var e=n.attr("echo-data");n.parent().addClass("catalogue-item-sel").siblings().removeClass("catalogue-item-sel");var a=m.data("getData")[e];t.cataFooterRender(a)},150)}),v.eq(1).on("contextmenu",".view-show",function(t){var e=$(this).attr("echo-data"),n=m.data("getData")[e].layout_type;return t.stopPropagation(),$("#catalogueContentmenu").show(),$("#catalogueContentmenu").attr("echo-data",e),$("#catalogueContentmenu").find("#fileOpts").attr("echo-data",e),1===n&&$("#catalogueContentmenu").find("#fileOpts").hide()||$("#catalogueContentmenu").find("#fileOpts").show(),$("#catalogueContentmenu").css({top:t.clientY-115,left:t.clientX-40}),!1}),v.eq(1).on("click",".catalogue-chec",function(t){t.stopPropagation();var e=0===v.eq(1).find(".catalogue-chec-inp").not(":checked").length;$("#catalogueChecAll").children("input").prop("checked",e)}),$("#catalogueChecAll").click(function(){var t=$(this).children("input").prop("checked");v.eq(1).find(".catalogue-chec-inp").prop("checked",t)})}}]),t}(),O=function(){function t(){l(this,t),this.handle(),this.init(),this.orgBoxInit()}return i(t,[{key:"init",value:function(){this.calendar=new o.Calendar($(".dataTime"),$("#viewShowTime"),{rotate:4,style:2}),this.parCatalogSel=new o.SCombobox($("#parName"),{textField:"layout_name",idField:"layout_id",validCombo:!1,prompt:"请选择所属分类...",width:300})}},{key:"addCatalogue",value:function(t,e,n){r.api.checkName(e).then(function(n){return n?r.api.addView(t,a({user_id:u},e)):"重名"}).then(function(t){if("重名"!==t)if(t){var e=b.data("menuArr").map(function(t){return t.index});P.styleBoxrender(e,n),P.modal.close(S),d.tipToast("新增成功！",1)}else d.tipToast("新增失败！",0);else d.tipToast("重名，换一个名称！",2)}).catch(function(t){console.log(t)})}},{key:"orgBoxInit",value:function(){var t=this;r.api.getLayoutUserTree().then(function(e){e?t.orgTree=new o.Tree(_,{data:e.sub,textField:"name",idField:"id",checkbox:!0,checkCallback:function(){setTimeout(function(){var t=[].slice.call(_.find(".child-checkinp:checked")).map(function(t){var e=$(t).parent().siblings(".item-txt").text();return'<li echo-id="'+t.value+'" class="org-sel-item ">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-user-circle-o">&nbsp;</i>\n\t\t\t\t\t\t\t\t\t\t\t\t<b>'+e+"</b>\n\t\t\t\t\t\t\t\t\t\t\t </li>"});$("#orgSel").html(t.join(""))},60)},clickAndCheck:!0,childrenField:"sub",judgeRelation:function(t){return 0==t.type}}):d.tipToast("获取用户失败！",0)})}},{key:"handle",value:function(){var t=this;g.click(function(){var e=$(this).attr("type"),n=$(this).attr("method"),a=j.val().trim();if(a){var i="create"===n?t.parCatalogSel.getValue():f.attr("curid"),s=$(".style-sel").index()?"catalogue":"tab";switch(n){case"create":t.addCatalogue(e,{name:a,par_id:i},s);break;case"copy":var o=b.data("menuArr");r.api.checkName({par_id:o[o.length-1].layout_id,name:a}).then(function(t){t?r.api.copyLayout(i,a).then(function(t){if(t){var e=o.map(function(t){return t.index});P.styleBoxrender(e,s),P.modal.close(S),d.tipToast("视图复制成功！",1)}else d.tipToast("视图复制失败！",0)}):d.tipToast("该视图名称已经存在！",2)});break;case"modify":r.api.updataName({name:a,id:i}).then(function(t){if(t){var e=b.data("menuArr").map(function(t){return t.index});P.styleBoxrender(e,s),P.modal.close(S),d.tipToast("重命名成功！",1)}else d.tipToast("重名，换个名称！",2)}).catch(function(t){console.log(t)})}}}),$("#issueBtn").click(function(){var e=+f.attr("curid"),n=["-1"],a="-1",i="-1",s=1;[].slice.call(T.find(".s-switch input")).map(function(e,o){if(!e.checked)switch(o){case 0:var r=t.calendar.value;a=r[0].join(""),i=r[1].join("");break;case 1:var l=$.map(T.find(".child-checkinp:checked"),function(t){return t.value});l.length,n=l;break;case 2:s=0}}),n?r.api.ReleaseLayout({id:e,user:n,starttime:a,endtime:i,release:s}).then(function(t){if(t){d.tipToast("设置成功！",1);var e=b.data("menuArr").map(function(t){return t.index});P.styleBoxrender(e),P.modal.close(T)}else d.tipToast("设置失败！",0)}):d.tipToast("请选择可见用户！",2)}),T.on("click",".s-switch",function(){switch($(this).attr("sign")){case"time":$(this).siblings(".time-inpbox").toggleClass("active");break;case"org":$(this).parent().siblings(".org-box").toggleClass("active")}})}}]),t}(),D=function(){function t(){l(this,t),this.handle()}return i(t,[{key:"handle",value:function(){$("#delBtn").click(function(){var t=$.map($(".checkSingle:checked"),function(t){return t.value});if(t.length){var e=t.join(",");P.modal.show(C),k.attr("delArr",e)}}),k.click(function(){d.renderTipM(w,"#g-load");var t=$(this).attr("delArr");x.html(""),r.api.updataRecycle({user_id:u,id:t}).then(function(t){if(w.addClass("g-status"),t){var e=b.data("menuArr").map(function(t){return t.index});P.styleBoxrender(e),d.renderTipM(w,"#g-success")}else d.renderTipM(w,"#g-error")})})}}]),t}(),F=function(){function t(){l(this,t),this.InitIconBox(y),this.handle()}return i(t,[{key:"InitIconBox",value:function(t){r.api.getAllLayout_icon().then(function(e){if(e){var n=e.par,a=e.child,i=n.map(function(t){return'\n\t\t\t\t\t\t    <span class="sicon '+t.name+'" echo-data="'+t.id+'"></span> \n\n\t\t\t\t\t\t\t'}),s='\n\t\t\t\t\t\t\t<div class="iconBox-item">'+a.map(function(t){return'\n\t\t\t\t\t\t    <span class="sicon '+t.name+'" echo-data="'+t.id+'"></span> \n\t\t\t\t\t\t\t'}).join("")+'</div>\t\n\t\t\t\t\t\t\t<div class="iconBox-item">'+i.join("")+"</div>\t\n\t\t\t\t\t\t\t";t.html(s)}else d.tipToast("图标获取失败！",0)})}},{key:"handle",value:function(){y.on("click",".sicon",function(){$(".icon-sel").removeClass("icon-sel"),$(this).addClass("icon-sel")}),$("#iconFooter").on("click","p",function(){var t=$(this).attr("sign"),e=y.parent();switch(t){case"sub":var n=f.attr("curId"),a=$(".icon-sel").attr("echo-data");r.api.updataIcon({icon_id:a,id:n}).then(function(t){if(t){P.modal.close(e,"icon-active");var n=b.data("menuArr").map(function(t){return t.index}),a=$(".style-sel").index()?"catalogue":"tab";P.styleBoxrender(n,a),d.tipToast("图标更新成功！",1)}else d.tipToast("图标更新失败！",0)});break;case"close":P.modal.close(e,"icon-active")}}),$("#iconContainer").on("click",function(t){t.stopPropagation()})}}]),t}(),M=function(){function t(){l(this,t),this.handle(),this.init()}return i(t,[{key:"init",value:function(){var t=this,e=this;this.modal=new o.SModal,this.table=new A,this.catalogue=new B,this.addModal=new O,this.delModal=new D,this.iconBox=new F,this.inp=new o.SInp,this.search=new o.Search($("#u-search")),this.dropMenu=new o.DropMenu($("#dropMenu"),{buttonTxt:"新增",itemCallback:function(t){var n=t.attr("echo-data");g.attr({type:n,method:"create"}),j.val(null);var a=h.datagrid("getData").rows.reduce(function(t,e){var n=e.layout_name,a=e.layout_id;return 1===e.layout_type&&t.push({layout_name:n,layout_id:a}),t},[]),i=b.data("menuArr"),s=i[i.length-1].layout_id;a.unshift({layout_name:"当前分类",layout_id:s}),e.addModal.parCatalogSel.loadData(a),e.addModal.parCatalogSel.setValue(s),I.parent().show(),P.modal.show(S)},slideCallBack:function(){t.dropMenuCallback()}}),this.styleBoxrender(),this.tabCardInit([{layout_name:"我的创建",index:0,layout_id:-2}])}},{key:"dropMenuCallback",value:function(e){var n=b.data("menuArr").length,a=t.dropMenuConfig.filter(function(t){return 1===n?"catalogue"===t.id:!(3<n)||"view"===t.id});this.dropMenu.reload(a)}},{key:"styleBoxrender",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[0],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"tab";r.api.getAllLayout().then(function(a){if(a){var i=[a];f.data("tabData",i);var s=JSON.stringify(i);s=JSON.parse(s),e.map(function(t){s=s[t].sub}),"tab"===n?t.table.loadTab(s):t.catalogue.catalogueInit(s)}else d.tipToast("视图获取失败！",0)})}},{key:"tabCardInit",value:function(t){b.data("menuArr",t);var e=t.length,n=t.map(function(t,n){var a=t.layout_name;return'<div class="card" echo-data="'+t.index+'"><span>'+a+"</span>"+(n===e-1?"":'&nbsp;&nbsp;<i class="fa fa-angle-right fa-lg">&nbsp;&nbsp;</i>')+"</div>"});b.html(n.join(""))}},{key:"toEdit",value:function(t,e){var n=+t.attr("echo-data"),a=e?m.data("getData")[n]:h.datagrid("getData").rows[n],i=a.layout_name,s=a.layout_id,o=window.parent;o.menuID=s,o.menuName=i,console.log(o.menuID),$("#slide",o.document).animate({width:0},500,function(){$("#content",window.parent.document).addClass("no-head"),window.location.href="./editTemplate.html"})}},{key:"getCurTabData",value:function(t,e){for(var n=f.data("tabData"),a=0;a<=e;)n=n[t[a].index].sub,a++;return n}},{key:"handleCard",value:function(t){var e=b.data("menuArr"),n=e.length,a=t.index();if(a!==n-1){var i=this.getCurTabData(e,a);$(".style-sel").index()?this.catalogue.catalogueInit(i):this.table.loadTab(i);var s=e.slice(0,a+1);this.tabCardInit(s)}}},{key:"changeStyle",value:function(t){if(!t.hasClass("style-sel")){var e=t.index();if(P.modal.close(v.eq(1-e),"style-active"),P.modal.show(v.eq(e),"style-active"),t.addClass("style-sel").siblings(".style-item").removeClass("style-sel"),e){var n=h.datagrid("getData").rows;this.catalogue.catalogueInit(n)}else{var a=m.data("getData");this.table.loadTab(a)}}}},{key:"handle",value:function(){$(window).on("click",function(){$(".icon-active").removeClass("icon-active"),$("#catalogueContentmenu").hide()}),b.on("click",".card",function(){var t=$(this);P.handleCard(t),$("#catalogueChecAll").children("input").prop("checked",!1)}),$("#styleBox").on("click",".style-item",function(){var t=$(this);P.changeStyle(t)}),f.on("click",".tab-opt",function(t){var e=$(this).attr("node-sign"),n=$(this).parent().attr("echo-data"),a=$(".style-sel").index()?m.data("getData")[n]:h.datagrid("getData").rows[n],i=a.layout_type,s=a.layout_id,o=(a.layout_icon,a.layout_icon_name),l=a.layout_name,c=+f.attr("curId");switch(e){case"pre":var u=window.parent;$("#content",u.document).addClass("no-head"),window.location.href="./ManageViews.html?pre="+s,u.menuID=s,u.menuName=l;break;case"issue":r.api.showReleaseLayout(s).then(function(t){if(t){P.modal.show(T);var e=t.user,n=t.starttime,a=t.endtime,i=t.release;[].slice.call(T.find(".s-switch input")).map(function(t,s){switch(s){case 0:var o="-1"==n;(t.checked=o)?$(t).parent().siblings(".time-inpbox").removeClass("active"):($(t).parent().siblings(".time-inpbox").addClass("active"),P.addModal.calendar.setTime([n,a]));break;case 1:var r="-1"==e[0];(t.checked=r)?$(t).closest(".item-status").siblings(".org-box").removeClass("active"):($(t).closest(".item-status").siblings(".org-box").addClass("active"),P.addModal.orgTree.setValue(e));break;case 2:var l=1===i;t.checked=l}})}});break;case"copy":P.modal.show(S),I.parent().hide(),g.attr({method:"copy"});break;case"rename":P.modal.show(S),I.parent().hide(),g.attr({method:"modify"}),j.val(l);break;case"icon":t.stopPropagation();var d=y.parent(),p=d.hasClass("icon-active"),v=$(".iconBox-item");v.css("display","none"),v.eq(2-i).css("display","flex"),$(".icon-sel").removeClass("icon-sel"),y.find("."+o.trim()).addClass("icon-sel"),p&&c===s?P.modal.close(d,"icon-active"):P.modal.show(d,"icon-active")}f.attr("curId",s)})}}]),t}();M.dropMenuConfig=[{icon:"fa fa-file-text",text:"创建视图",id:"view"},{icon:"fa fa-folder",text:"创建分类",id:"catalogue"}];var P=new M}],[[46,0,1]]]);
//# sourceMappingURL=szViews.chunk.js.map